window['ymaps_loader_-Y-1-84s-I-Z_a_b_c_d_e_f)z)Q)J)I)Z,a_g_h_k_l_m,d_n4N_o4O4S4T4U4X.q.j:A.i.z.Q.J.I6a!a!v:B!x:C!E:F:G:H!G!H!K'](
[
['-Y', function (ym) {
ym.modules.define("graphics.generator.clip",["graphics.Path","graphics.generator.cohenSutherland","util.math.areEqual"],function(e,r,n,t){var h=function(e,r){return r=r||[0,0],[[e[0][0]-r[0],e[0][1]-r[1]],[e[1][0]-r[0],e[1][1]-r[1]]]},i={line:function(e,i,u,a){var l=[];u&&(i=h(i,u));for(var o=0,s=e.length;o<s;o++){var f=e[o].buffer.vertexes,g=e[o].indexes,c=g.length-1;if(g.length){for(var p=0;c;++p,--c)if(f[g[p+1]]){var v=f[g[p]],d=f[g[p+1]],m=n(v,d,i);m.inside&&(m.cutLines[0]&&l.length&&l.push(0),l.push(m.from),!m.cutLines[1]&&p!=c&&f[g[p+2]]||l.push(m.to))}else a||0==l[l.length-1]||l.push(0),p++;a&&l.length&&!t(l[0],l[l.length-1],0)&&l.push(l[0])}}var y=[r.fromArray(l)];return y},polygon:function(e,r,n){r=h(r,n);for(var t,i=0;i<2;i++)t=[[0==i?r[0][0]:-(1/0),1==i?r[0][1]:-(1/0)],[0==i?r[1][0]:1/0,1==i?r[1][1]:1/0]],e=this.line(e,t,null,!0);return e}};e(i)});}],
['-1', function (ym) {
ym.modules.define("graphics.generator.cohenSutherland",[],function(n){function r(n,r){var e=0;return n[0]<r[0][0]?e=1|e:n[0]>r[1][0]&&(e=2|e),n[1]<r[0][1]?e=4|e:n[1]>r[1][1]&&(e=8|e),e}var e=function(n,e,i){for(var o=n[0],t=e[0],u=n[1],a=e[1],c=r(n,i),f=r(e,i),d=i[0],s=i[1],v=d[0],g=d[1],h=s[0],l=s[1],m=0==(c|f),p=0!=(c&f),y=!(m||p),L=0,S=[0,0];!m&&!p;){if(0==c){L=L?0:1;var b;b=o,o=t,t=b,b=u,u=a,a=b,b=c,c=f,f=b,S[L]=!0}0!=(1&c)?(u+=(a-u)*(v-o)/(t-o),o=v):0!=(2&c)?(u+=(a-u)*(h-o)/(t-o),o=h):0!=(4&c)?(o+=(t-o)*(g-u)/(a-u),u=g):0!=(8&c)&&(o+=(t-o)*(l-u)/(a-u),u=l),c=r([o,u],i),m=0==(c|f),p=0!=(c&f)}return{inside:m,outside:p,clipping:y,cutLines:S,to:[L?o:t,L?u:a],from:[L?t:o,L?a:u]}};n(e)});}],
['-8', function (ym) {
ym.modules.define("graphics.generator.stroke.dash",["util.vector","graphics.Path"],function(e,r,a){function t(e,t,f,n){function s(e,r){return e<r?e:r}if(0==t.length)return e;f=f||0;for(var o,h=e.buffer.lengths||a.generateLineLengths(e).buffer.lengths,i=e.buffer.vertexes,l=e.indexes,u=t.length,g=h[l[0]]-f,d=0,c=-1,v=0,p=[],b=0,m=0;m<u;++m)b+=parseFloat(t[m]);if(b*=2,0==b)return e;if(g<0){var k=Math.floor(Math.abs(g/b));g+=b*k}else g=g%b-b;for(var x=0,M=l.length-1;x<M;)for(var m=0;m<u;++m)if(x<M){var y=Math.max(1,parseFloat(t[m]));if(d%2==0){do{var F,L=l[x],w=l[x+1],z=g-h[L],A=i[L];if(c!=x&&(o=r.normalize(r.sub(i[w],A)),c=x,v=h[w]-h[L]),F=s(v-z,y),y-=F,g+=F,z+F>0&&(z<0&&(F+=z,z=0),p.push(r.add(A,r.scale(o,z))),p.push(r.add(A,r.scale(o,z+F))),p.push(0)),y>0&&(x++,x>=M))break}while(y>0)}else g+=y;for(d++;g>h[l[x+1]];)++x}return a.fromArray(p)}e({stroke:t})});}],
['4s', function (ym) {
ym.modules.define("graphics.render.abstract.shape",[],function(t){var i={ellipse:function(t,i,e){this.attr={x:t[0],y:t[1],rx:i,ry:"undefined"==typeof e?i:e},this.updateGeometry()},circle:function(t){this.ellipse(t.getCoordinates(),t.getRadius())},setGeometry:function(t){this.circle(t)},shiftShape:function(t){this.rattr={x:this.attr.x+t[0],y:this.attr.y+t[1]}},finish:function(){delete this.rattr}},e={setGeometry:function(t){var i=t.getCoordinates(),e=i[0],n=i[1];this.attr={leftTop:[Math.min(e[0],n[0]),Math.min(e[1],n[1])],rightBottom:[Math.max(e[0],n[0]),Math.max(e[1],n[1])]},this.updateGeometry()},pointRectangle:function(t,i){this.rectangle([t[0]-i[0]/2,t[1]-i[1]/2],[t[0]+i[0]/2,t[1]+i[1]/2])},shiftShape:function(t){this.rattr={leftTop:[this.attr.leftTop[0]+t[0],this.attr.leftTop[1]+t[1]],rightBottom:[this.attr.rightBottom[0]+t[0],this.attr.rightBottom[1]+t[1]]}},finish:function(){this.rattr=null},parseRadius:function(t,i,e){return"auto"==t?.2*Math.min(i,e):parseInt(t||0)}},n={setGeometry:function(t){this.coordinates=t,this.updateGeometry()},polygon:function(t){this.setGeometry(t)},polygonWithHole:function(t){this.setGeometry(t)},line:function(t){this.setGeometry(t)},shiftShape:function(t){throw new Error("VBO cannot be shifted")},finish:function(){delete this.r_coordinates,delete this.r_holes}},o={image:function(t){this.attr={x:t[0],y:t[1]},this.updateGeometry()},setGeometry:function(t){this.image(t.getCoordinates())},shiftShape:function(t){this.attr.position=[this.attr.x+t[0],this.attr.y+t[1]]},finish:function(){}},s={text:function(t,i){this.attr={x:t[0],y:t[1],text:i},this.updateGeometry()},shiftShape:function(t){this.attr.position=[Math.round(this.attr.x+t[0]),Math.round(this.attr.y+t[1])]},finish:function(){}};t({Ellipse:i,Rectangle:e,Polygon:n,Image:o,Text:s})});}],
['-I', function (ym) {
ym.modules.define("graphics.render.base.holder",["util.dom.element","util.dom.style"],function(t,e,i){t({createHolder:function(){return e.create({tagName:"div",css:{position:"absolute"}})},holder:function(){return this._holder||(this._holder=this.createHolder()),this._holder},applySetSize:function(t){var e={width:Math.ceil(t.width)+"px",height:Math.ceil(t.height)+"px"};return i.css(this.holder(),e),t.width>0&&t.height>0},setFinalPosition:function(t){i.setPosition(this.holder(),[(t?this.margin.left:0)+this.clippingOffset[0],(t?this.margin.top:0)+this.clippingOffset[1]])}})});}],
['-Z', function (ym) {
ym.modules.define("graphics.render.base.pane",["util.defineClass","util.pixelBounds","util.vector","event.Manager","Event"],function(i,t,e,n,s,h){var r=0,a=t(function(){this._holder=0,this.counterChanged=0,this.changeGeneration=0,this._shapesChanged=0,this.clippingPure=0,this.clippingRegion=0,this.isVisible=1,this.Shapes=[],this.renderTickCounter=0,this._addMarginOffsets=1,this._resizeToClipRegion=1,this._lockedToMBR=0,this.cache={},this.size={width:0,height:0},this.clippingOffset=[0,0],this.clippingShiftedOffset=[0,0],this.lastValidClippingRegion=[[0,0],[0,0]],this.events=new s,this._ID=r++,this._zOrder=-1,this.isUnderControl=!1},{getID:function(){return this._ID},setZIndex:function(i){this._zIndex!=i&&(this._zIndex=i,this.events.fire("orderChange",new h))},getZIndex:function(){return this._zIndex},setOrder:function(i){this._zOrder!=i&&(this._zOrder=i,this.events.fire("orderChange",new h))},getOrder:function(){return this._zOrder},addShape:function(i){var t=i.getPane();t!==this&&(t&&t.removeShape(i),this.Shapes.push(i),i.setPane(this),this.changed(i))},removeShape:function(i){this.changed(i);for(var t=0,e=this.Shapes,n=e.length;n;--n,++t)if(e[t]==i)return this.Shapes[t].setPane(null),this.Shapes.splice(t,1),!0;return!1},removeAll:function(i){this.changed(i);for(var t=0,e=this.Shapes,n=e.length;n;--n,++t)this.Shapes[t].setPane(null);this.Shapes=[]},changed:function(i,t){i&&(this._shapesChanged++,i!==!0&&this.changeGeneration++),t||(this.counterChanged++,this.isVisible=1)},isChanged:function(){return this.counterChanged>0},shift:function(){var i,t=this.Shapes,e=t.length,n=this.getBounds(),s=[-n[0][0],-n[0][1]],h=this.clippingOffset,r=[s[0],s[1]];if(this._shapesChanged||!this.shapesShift||this.shapesShift[0]!=r[0]||this.shapesShift[0]!=r[0])for(this.shapesShift=r,this._shapesChanged++,i=0;e;++i,--e)t[i].shift(r);this.clippingShiftedOffset=[h[0],h[1]]},calculateLockRegion:function(i,t){var n=i.getBounds(),s=t?this.clippingShiftedOffset:this.clippingOffset,h=t?this.shapesShift:[-this.margin.left,-this.margin.top],r=[[n[0][0]+h[0],n[0][1]+h[1]],[n[1][0]+h[0],n[1][1]+h[1]]],a=this.size,o=[[s[0],s[1]],[s[0]+a.width,s[1]+a.height]],g=e.getIntersection(r,o);return g?g:[[s[0],s[1]],[s[0],s[1]]]},resize:function(){var i=this.getBounds();return this.margin={left:i[0][0],top:i[0][1],width:i[1][0]-i[0][0],height:i[1][1]-i[0][1]},this.clippingPure?this.clippingRegion=[this.clippingPure[0][0]-this.margin.left,this.clippingPure[0][1]-this.margin.top,this.clippingPure[1][0]-this.margin.left,this.clippingPure[1][1]-this.margin.top]:this.clippingRegion=[0,0,this.margin.width,this.margin.height],this._isClipped=this.clippingRegion[2]<this.margin.width||this.clippingRegion[3]<this.margin.height,this.applySetSize({width:Math.max(0,Math.min(this.clippingRegion[2],this.margin.width)),height:Math.max(0,Math.min(this.clippingRegion[3],this.margin.height))})},isClipped:function(){return this._isClipped},lockBoundsTo:function(i){this._lockedToMBR=i,this.changed()},setClippingRegion:function(i,t,n){i?this.clippingPure=e.clone(i):(this.clippingPure||(t=!0),this.clippingPure=null),n||this.changed(null,t)},getClippingRegion:function(){return this.clippingPure},updateClipping:function(i,t,s){if(!i)return this.setClippingRegion();var h=this.getBounds(),r=this.clippingPure||[[0,0],[0,0]],a=i,o=e.containsBounds(r,h),g=e.containsBounds(a,h),p=e.areIntersecting(r,h),d=e.areIntersecting(a,h);this.isVisible=d;var l=!p&&!d||o&&g;if(this.setClippingRegion(i,!0,l),!l){if(s&&0==n.length2(n.sub(e.getSize(r),e.getSize(a)))){var c=n.sub(this.lastValidClippingRegion[0],a[0]);if(!(Math.abs(c[0])>s||Math.abs(c[1])>s))return;this.lastValidClippingRegion=e.clone(i)}this.changed()}},getClippedSizes:function(i){if(this._resizeToClipRegion){var t,e=this.clippingRegion;return this.clippingOffset=[Math.max(0,e[0]),Math.max(0,e[1])],t={width:Math.max(0,Math.ceil(i.width-this.clippingOffset[0])),height:Math.max(0,Math.ceil(i.height-this.clippingOffset[1]))}}return this.clippingOffset=[0,0],i},setFinalPosition:function(){this.isUnderControl||this._holder.setFinalPosition(this._addMarginOffsets)},setPositionPolicy:function(i,t){this._addMarginOffsets=i,this.isUnderControl=t},render:function(){this.isVisible?this.resize()?(this.shift(),this._shapesChanged&&(this.prepareRender(),this.renderShapes(),this._shapesChanged=0),this.onRenderEnd(),this.finish()):this.isVisible=0:this.margin=null},onRenderEnd:function(i,t){if(i)this._onRenderEnd=this._onRenderEnd||[],this._onRenderEnd.push([i,t]);else if(this._onRenderEnd)for(var e=0,n=this._onRenderEnd.length;e<n;++e)this._onRenderEnd[e][0].call(this._onRenderEnd[e][1],this)},renderShapes:function(){var i,t=this.Shapes,e=t.length,n=this.clippingPure;for(i=0;e;++i,--e){var s=t[i].getBounds();(!n||s[1][0]>n[0][0]&&s[0][0]<n[1][0]&&s[1][1]>n[0][1]&&s[0][1]<n[1][1])&&this.renderInternalShape(t[i])}},prepareRender:function(){},renderInternalShape:function(i){i.render()},finish:function(){this.counterChanged=0;var i,t=this.Shapes,e=t.length;for(i=0;e;++i,--e)t[i].finish()},each:function(i,t){this.counterChanged=0;var e,n=this.Shapes,s=n.length;for(e=0;s;++e,--s)i.call(t,n[e])},flush:function(){this.isChanged()&&this.render()},getBounds:function(){if(this._lockedToMBR)return this._lockedToMBR;if(this.cache.Bounds&&this.cache.Bounds.seq==this.changeGeneration)return this.cache.Bounds.data;var i,t,n,s=this.Shapes,h=s.length,r=[];if(!h)return[[0,0],[0,0]];if(1==h)n=s[0].getBounds();else{for(i=0;h;++i,--h)t=e.clone(s[i].getBounds()),r.push(t);n=e.fromBounds(r)}return this.cache.Bounds={seq:this.changeGeneration,data:n},n}});i(a)});}],
['_a', function (ym) {
ym.modules.define("graphics.render.base.PaneView",["util.defineClass","graphics.render.base.view","util.extend"],function(e,t,s,i){function n(){n.superclass.constructor.call(this),this._viewPane=this.getBaseTech().createPane(),this._typesSet="",this._shapes=[]}t(n,s,{createPane:function(){return this.getBaseTech().createPane()},setGeometry:function(e){var t=[],s=this.getBaseTech();e.each(function(e){t.push(s.nameShapeForGeometry(e))}),t=t.join(""),t!=this._typesSet&&(this._typesSet=t,this._viewPane.removeAll(),this._shapes=[],e.each(function(e){var t=s.createShapeFromGeometry(e);t&&(t.events.setParent(this.events),this._viewPane.addShape(t),this._shapes.push(t))},this),this.changeAttributes(this.getOriginalAttributes())),e.each(function(e,t){this._shapes[t].setGeometry(e),this._shapes[t].setBounds(e.getBounds())},this),this.updateGeometry()},addShape:function(e){this._viewPane.addShape(e)},getBounds:function(){return this._viewPane.getBounds()},render:function(){return this._viewPane.updateClipping(this.pane.getClippingRegion(),!1,0),this._viewPane.render()},getInternalPane:function(){return this._viewPane},changeAttributes:function(e){n.superclass.changeAttributes.call(this,e),e=i(e,{opacity:1}),this._viewPane.each(function(t){t.changeAttributes(e)})},setStyles:function(){},shift:function(e){n.superclass.shift.call(this,e),this._viewPane.each(function(e){})}}),e(n)});}],
['_b', function (ym) {
ym.modules.define("graphics.render.base.tech",["util.defineClass","util.Storage"],function(e,t,n){var r=ym.env.browser,a="MSIE"==r.name&&r.documentMode>=11||r.isEdge||"WebKit"==r.engine||"Gecko"==r.engine,i=t(function(){this._shapes=new n},{isShapeSupported:function(e){return"undefined"!=typeof this._shapes.get(e)},createPane:function(){return!1},createShape:function(e){var t=this._shapes.get(e),n=new t.factory;return n.assignNameType(e),n},nameShapeForGeometry:function(e){var t=e.getType();switch(t){case"Circle":return"circle";case"Rectangle":return e.getMetaData().layout?"layout":"rectangle";case"LineString":return"line";case"Polygon":return e.getCoordinates().length>1&&"evenOdd"==e.getFillRule()&&!a?"polygon-holed":"polygon-filled";case"Point":return"image"}return!1},createShapeFromGeometry:function(e){return this.createShape(this.nameShapeForGeometry(e))},registerShape:function(e,t){this._shapes.add(e,{factory:t})}});e(i)});}],
['_c', function (ym) {
ym.modules.define("graphics.render.base.view",["util.defineClass","Event","event.Manager","graphics.generator.clip","graphics.util.color","graphics.util.stroke","util.extend","graphics.util.image","util.pixelBounds"],function(t,i,e,s,r,n,a,o,l,h){var u=16383,f=0,c=function(){this.pane=null,this._nameType="",this.geometryGeneration=0,this.renderGeneration=0,this.shiftBy=[0,0],this.attributes=null,this._userAttributes={},this.lastOversizePosition=null,this.events=new s};i(c,{can:function(t){return t in this._Shapes},is:function(t){return this._nameType===t},assignNameType:function(t){this._nameType=t},shift:function(t){this.shiftBy=t.slice(0)},setBounds:function(t){this.baseBounds=t||[[0,0],[0,0]],this.finalizeBounds()},hasMultiStroke:function(){return this.attributes&&this.attributes.stroke&&this.attributes.stroke.length},isVisibleStroke:function(t){return t.color&&t.width>0&&t.strokeExtOpacity>0},getStrokeSettings:function(t){var i=this.attributes&&this.attributes.stroke&&this.attributes.stroke[t];return!!i&&i},getDeltaWidth:function(){for(var t,i=0,e=0;t=this.getStrokeSettings(e++);)i=Math.max(i,t.width||0);return i},finalizeBounds:function(){var t=this.baseBounds||[[0,0],[0,0]],i=this.getDeltaWidth();i+=.5,this.MBR=[[Math.floor(t[0][0]-i),Math.floor(t[0][1]-i)],[Math.ceil(t[1][0]+i),Math.ceil(t[1][1]+i)]]},getBounds:function(){return this.MBR},isOversized:function(){var t=this.getBounds();return Math.max(t[1][0]-t[0][0],t[1][1]-t[0][1])>this.getOversizeLimit()},getOversizeLimit:function(){return u},performClippingOn:function(t,i,e,s){"undefined"==typeof s&&(s=this.getOversizeLimit());var n=this.pane.calculateLockRegion(this,!0),a=s/2,o=function(t,i){var e=h.getIntersection(t,i);if(!e)return!1;var s=h.getSize(e);return Math.max(Math.abs(s[0]),Math.abs(s[1]))>a};return n[0][0]-=a,n[0][1]-=a,n[1][0]+=a,n[1][1]+=a,t._clippingData=t._clippingData||f++,this.lastOversizePosition&&!o(n,this.lastOversizePosition.location)&&this.lastOversizePosition.data[t._clippingData]||(this.lastOversizePosition||(this.lastOversizePosition={data:[]}),this.lastOversizePosition.location=n,this.lastOversizePosition.data[t._clippingData]=r[i](t,n,e)),this.lastOversizePosition.data[t._clippingData]},willAttributeReflow:function(t){return"fill"==t||"stroke"==t},willAttributeChangeGeometry:function(t){return"strokeWidth"==t||"radius"==t||"stroke"==t||"rotation"==t},setAttributes:function(t){return t&&this.changeAttributes(t),this.finalizeBounds(),this.updateGeometry(),!1},changeAttributes:function(t){var i=!1,s=!1,r=!1,n=[];for(var a in t)t.hasOwnProperty(a)&&(this._userAttributes.hasOwnProperty(a)&&t[a]==this._userAttributes[a]||t[a]!=this._userAttributes[a]&&(((s|=this.willAttributeChangeGeometry(a))||(i|=this.willAttributeReflow(a)))&&n.push(a),this._userAttributes[a]=t[a],r=!0));r&&this.dispatchAttrs(this._userAttributes),i||s?(this.finalizeBounds(),s?(this.events.fire("geometryModify",new e({changed:n})),this.updateGeometry()):(this.events.fire("needRedraw",new e({changed:n})),this.pane&&this.pane.changed(this))):this.applyDynamicStyles()},applyDynamicStyles:function(){this.setStyles()},dispatchAttrs:function(t){this._userAttributes=t,this.attributes||(this.attributes={});var i=this.attributes;i.stroke=this._loadStrokeSettings(t),i.fill=!!t.fill&&this._loadFillSettings(t),i.separateContainer=t.separateContainer,i.pixelPerfect=t.pixelPerfect,i.rotation=t.rotation,i.radius=t.radius,i.offset=t.offset,i.size=t.size,i.href=t.href,i.renderLayout=t.renderLayout,i.zIndex=t.zIndex||0,i.zOrder=t.zOrder||0,i.opacity=t.opacity===!1?1:t.opacity,i.fill&&i.fill.background.imageHref?i.fill.background.imageHref!==this._activeFillImageHref&&(this._fillImage=null,this._activeFillImageHref=i.fill.background.imageHref,this._loadFillImage()):(this._activeFillImageHref=this._fillImage=null,i.fill.background={})},getOriginalAttributes:function(){return this._userAttributes},_loadStrokeSettings:function(t){var i=[],e=t.stroke;if(e&&e.length)for(var s=0,r=e.length;s<r;++s){var o=e[s],l={width:o.strokeWidth||0,opacity:o.strokeColor?n.decode(o.strokeColor)[3]:0,color:n.decode(o.strokeColor,o.strokeExtOpacity),strokeExtOpacity:o.strokeExtOpacity||1};l.setup=a.decodeStyle(o.strokeStyle,l.width),i.push(l)}return!!i.length&&i},_loadFillSettings:function(t){var i={fillRule:t.fillRule,extOpacity:t.fillExtOpacity,color:!!t.fill&&n.decode(t.fillColor,t.fillExtOpacity),background:{imageHref:t.fillImageHref,style:t.fillMethod,image:this._fillImage}};if(i.opacity=i.color?i.color[3]:0,t.fillImageHref){if(t.fillImageHref&&"tile"!=t.fillMethod&&"stretch"!=t.fillMethod&&(i.background.method="tile",ym.env.debug))throw new Error("graphics.render.base.View: задан неверный fillMethod")}else i.background=!1;return i.exists=i.extOpacity>0&&(!!i.color||!!i.background),i},_loadFillImage:function(){this._activeFillImageHref?l.load(this._activeFillImageHref,this._onFillImageLoad,this):(this._fillImage=null,this.updateGeometry())},_onFillImageLoad:function(t,i){i?(this._fillImage={image:t,href:t.src,scaleRatio:t.scaleRatio||1,size:[t.naturalWidth||t.width,t.naturalHeight||t.height]},this.updateGeometry()):this._fillImage=null,this.attributes.fill&&this.attributes.fill.background&&(this.attributes.fill.background.image=this._fillImage)},getZIndex:function(){return this.attributes.zIndex},createPane:function(){},setPane:function(t){this.pane=t,t&&t.changed(this)},getPane:function(){return this.pane},paneName:function(){},updateGeometry:function(){this.geometryGeneration++,this.events.fire("geometryUpdate"),this.lastOversizePosition=null,this.pane&&this.pane.changed(this)},renderUpdated:function(){this.pane&&this.pane.renderUpdated(),this.finish()},finish:function(){},render:function(){},isClipped:function(){var t=this.getPane();return!!t&&t.isClipped()}}),t(c)});}],
['_d', function (ym) {
ym.modules.define("graphics.render.canvas.holder",["graphics.render.base.holder","util.dom.element","util.extend"],function(e,t,n,a){e(a({},t,{createHolder:function(){return n.create({tagName:"canvas",css:{position:"absolute"}})},getCanvas:function(){return this._canvas||(this._canvas=this.holder().getContext("2d")),this._canvas}}))});}],
['_e', function (ym) {
ym.modules.define("graphics.render.canvas.pane",["util.defineClass","graphics.render.base.pane","graphics.render.canvas.holder","graphics.render.canvas.util"],function(e,i,t,s,h){function a(){a.superclass.constructor.call(this)}i(a,t,s,{applyClipping:function(){},resize:function(){return this.changed(!0,!0),a.superclass.resize.call(this)},applySetSize:function(e){e=this.getClippedSizes(e);var i=this.holder(),t=[Math.ceil(e.width),Math.ceil(e.height)],s=h.scaleFactor(this.getCanvas());return this.scaleFactor==s&&this._canvasSize&&this._canvasSize[0]==t[0]&&this._canvasSize[1]==t[1]||(i.width=t[0]*s,i.height=t[1]*s,i.style.width=t[0]+"px",i.style.height=t[1]+"px",this._canvasSize=t),this.scaleFactor=s,this.getCanvas().setTransform(1,0,0,1,0,0),this.setFinalPosition(),this.size.width=e.width,this.size.height=e.height,e.width>0&&e.height>0},renderUpdated:function(){this.renderTickCounter++,ym.env.debug&&this.holder().setAttribute("xticks",this.renderTickCounter)},prepareRender:function(){var e=this.holder();this.getCanvas().clearRect(0,0,e.width,e.height)},renderInternalShape:function(e){var i=this.getCanvas(),t=e.lockCanvas(i,this.size,this.clippingOffset,this.clippingPure);t.transform(1,0,0,1,-this.clippingShiftedOffset[0],-this.clippingShiftedOffset[1]),e.render(),e.releaseCanvas(t,i)}}),e(a)});}],
['_f', function (ym) {
ym.modules.define("graphics.render.canvas.paneView",["util.defineClass","graphics.render.base.PaneView","graphics.render.canvas.tech","graphics.render.canvas.util"],function(e,a,s,n,t){function i(){i.superclass.constructor.call(this)}a(i,s,{getBaseTech:function(){return n},paneName:function(){return"canvas"},willAttributeReflow:function(e){return!0},setPane:function(e){i.superclass.setPane.call(this,e)},render:function(){i.superclass.render.call(this);var e=this.getInternalPane();if(e.isVisible){this.canvas.globalAlpha=this.attributes.opacity;var a=this.shiftBy,s=e.getBounds(),n=e.clippingOffset,r=this.pane.clippingOffset,c=[s[0][0]+a[0]+n[0]-r[0],s[0][1]+a[1]+n[1]-r[1]],l=t.scaleFactor(this.canvas);this.canvas.transform(1,0,0,1,this.pane.clippingShiftedOffset[0],this.pane.clippingShiftedOffset[1]),this.canvas.drawImage(e.holder(),l*c[0],l*c[1]),this.canvas.globalAlpha=1}},lockCanvas:function(e,a,s,n){return this.canvas=e,e.save(),e},releaseCanvas:function(e,a){e.restore()}}),n.registerShape("container",i),e(i)});}],
[')z', function (ym) {
ym.modules.define("graphics.render.canvas.shape.Ellipse",["util.defineClass","graphics.render.canvas.view","graphics.render.canvas.tech","graphics.render.abstract.shape"],function(e,s,t,r,i){function a(){a.superclass.constructor.call(this)}s(a,t,i.Ellipse,{_renderCircle:function(){this.canvas.beginPath(),this.canvas.arc(this.rattr.x,this.rattr.y,this.attr.rx,0,2*Math.PI,!0)},_renderEllipse:function(){var e=2*this.attr.rx,s=2*this.attr.ry,t=this.rattr.x-this.attr.rx,r=this.rattr.y-this.attr.ry,i=e/2*.5522848,a=s/2*.5522848,h=t,c=r,n=h+e,l=c+s,v=h+e/2,p=c+s/2;this.canvas.beginPath(),this.canvas.moveTo(h,p),this.canvas.bezierCurveTo(h,p-a,v-i,c,v,c),this.canvas.bezierCurveTo(v+i,c,n,p-a,n,p),this.canvas.bezierCurveTo(n,p+a,v+i,l,v,l),this.canvas.bezierCurveTo(v-i,l,h,p+a,h,p),this.canvas.closePath()},execute:function(){this.is("circle")?this._renderCircle():this.is("ellipse")&&this._renderEllipse()},render:function(){a.superclass.render.call(this),this.shiftShape(this.shiftBy),this.execute(),this.closeAndFill(),this.renderUpdated()}}),r.registerShape("ellipse",a),r.registerShape("circle",a),e(a)});}],
[')Q', function (ym) {
ym.modules.define("graphics.render.canvas.shape.Holed",["util.defineClass","graphics.render.canvas.shape.Polygon","graphics.render.canvas.tech","graphics.render.abstract.shape","graphics.render.canvas.util","graphics.util.coordinateCast"],function(t,s,a,e,i,r,n){function l(){l.superclass.constructor.call(this),this.shiftBy=0}s(l,a,{renderStep:function(t){"stroke"==t?this.stroke():(this.canvas.lineWidth=0,this._fillData(null,t))},__getFullContour:function(){var t=[];t.push.apply(t,this.coordinates);var s,a=this.holes,e=a.length;for(s=0;s<e;++s)t.push.apply(t,a[s]);return t},_fillData:function(t,s){this.isSimplePolygon();var a,e=n.toDoubleArray(this.coordinates),i=e.length;for(a=0;a<i;++a)s?(this.renderPolygon([e[a]]),this.canvas[s]()):this.fillLine([e[a]]);s||this.canvas.closePath()},isSimplePolygon:function(){return"nonZero"==this.attributes.fill.fillRule},needCanvasLock:function(){return!0},render:function(){if(this.isSimplePolygon(),this.canvas.globalCompositeOperation="source-over",this.attributes.fill){if(this.fixTileFill(),this.setStyles({alpha:1}),"nonZero"!=this.attributes.fill.fillRule&&(this.canvas.globalCompositeOperation="xor"),this.renderStep("fill"),this.attributes.fill.background.image){if("tile"==this.attributes.fill.background.style){this.canvas.fillStyle=this.attributes.fillPattern,this.canvas.globalCompositeOperation="source-in";var t=this.getBounds(),s=this.shiftBy,a=t[1][0]-t[0][0],e=t[1][1]-t[0][1];this.canvas.fillRect(t[0][0]+s[0],t[0][1]+s[1],a,e),this.canvas.globalCompositeOperation="source-over"}}else if(1!=this.attributes.fill.color[3]&&this.temporaryCanvas){var i=r.tempPBuffer(this.temporaryCanvas.size[0],this.temporaryCanvas.size[1]);i.canvas.globalAlpha=this.attributes.fill.color[3],i.canvas.drawImage(this.temporaryCanvas.element,0,0),i.canvas.save(),i.canvas.scale(this.pane.scaleFactor,this.pane.scaleFactor),i.canvas.transform(1,0,0,1,this.temporaryCanvas.offset[0],this.temporaryCanvas.offset[1]),i.canvas.transform(1,0,0,1,-this.pane.clippingShiftedOffset[0],-this.pane.clippingShiftedOffset[1]),i.canvas.translate(this.deltaOffset[0],this.deltaOffset[1]),this.canvas=i.canvas,i.offset=this.temporaryCanvas.offset,this.temporaryCanvas.canvas.restore(),this.temporaryCanvas.release(),this.temporaryCanvas=i}this.canvas.globalAlpha=1,this.canvas.globalCompositeOperation="source-over",this.setStyles(),this.applyBackgroundFill()}this._strokeSet=!1,this.renderStep("stroke"),this.renderUpdated()}}),e.registerShape("polygon-holed",l),t(l)});}],
[')J', function (ym) {
ym.modules.define("graphics.render.canvas.shape.Image",["util.defineClass","graphics.render.canvas.view","graphics.render.canvas.tech","graphics.render.abstract.shape","graphics.util.image"],function(t,e,i,a,s,r){function h(){h.superclass.constructor.call(this),this._renderedImage=null,this._renderedImageHref=""}e(h,i,s.Image,{dispatchAttrs:function(t){h.superclass.dispatchAttrs.call(this,t),this.attributes.href!=this._renderedImageHref&&(this._renderedImage=null,this._renderedImageHref=this.attributes.href,this._loadImage())},_loadImage:function(){this.attributes.href?r.load(this.attributes.href,this._onImageLoad,this):this.updateGeometry()},getBounds:function(){var t=h.superclass.getBounds.call(this);if(this.attributes.rotation){for(var e=this.attributes.offset,i=this.attributes.rotation*Math.PI/180,a=[t[1][0]-t[0][0],t[1][1]-t[0][1]],s=Math.cos(i),r=Math.sin(i),n=[[0,0],[a[0],0],[a[0],a[1]],[0,a[1]]],u=[],o=[],d=0;d<4;++d)n[d][0]+=e[0],n[d][1]+=e[1],n[d]=[n[d][0]*s-n[d][1]*r,n[d][0]*r+n[d][1]*s],n[d][0]+=-e[0]+t[0][0],n[d][1]+=-e[1]+t[0][1],u.push(n[d][0]),o.push(n[d][1]);return[[Math.floor(Math.min.apply(Math,u)),Math.floor(Math.min.apply(Math,o))],[Math.ceil(Math.max.apply(Math,u)),Math.ceil(Math.max.apply(Math,o))]]}return t},_onImageLoad:function(t,e){e&&(this._renderedImage=t,this._imageSize=[t.naturalWidth||t.width,t.naturalHeight||t.height],this.updateGeometry())},render:function(){if(!this._renderedImage)return!1;h.superclass.render.call(this),this.shiftShape(this.shiftBy),this.canvas.save();var t=[this.attr.position[0]+this.attributes.offset[0],this.attr.position[1]+this.attributes.offset[1]];this.canvas.translate(this.attributes.pixelPerfect?Math.round(t[0]):t[0],this.attributes.pixelPerfect?Math.round(t[1]):t[1]),this.attributes.rotation&&this.canvas.rotate(this.attributes.rotation*Math.PI/180),this.canvas.drawImage(this._renderedImage,this.attributes.shift[0],this.attributes.shift[1],Math.max(1,Math.min(this._imageSize[0]-this.attributes.shift[0],this.attributes.originalSize[0])),Math.max(1,Math.min(this._imageSize[1]-this.attributes.shift[1],this.attributes.originalSize[1])),this.attributes.offset[0],this.attributes.offset[1],this.attributes.size[0],this.attributes.size[1]),this.canvas.restore(),this.renderUpdated()}}),a.registerShape("image",h),t(h)});}],
[')I', function (ym) {
ym.modules.define("graphics.render.canvas.shape.Layout",["util.defineClass","graphics.render.canvas.view","graphics.render.canvas.tech"],function(t,a,e,s){function r(){r.superclass.constructor.call(this),this._renderedImage=null,this._renderedImageHref=""}a(r,e,{setGeometry:function(t){this._geometry!=t&&(this._geometry=t,this.updateGeometry())},needCanvasLock:function(){return this.attributes.opacity<1},getBounds:function(){var t=r.superclass.getBounds.call(this);if(this.attributes.rotation){for(var a=this.attributes.offset||[0,0],e=this.attributes.rotation*Math.PI/180,s=[t[1][0]-t[0][0],t[1][1]-t[0][1]],i=Math.cos(e),h=Math.sin(e),n=[[0,0],[s[0],0],[s[0],s[1]],[0,s[1]]],o=[],u=[],c=0;c<4;++c)n[c][0]+=a[0],n[c][1]+=a[1],n[c]=[n[c][0]*i-n[c][1]*h,n[c][0]*h+n[c][1]*i],n[c][0]+=-a[0]+t[0][0],n[c][1]+=-a[1]+t[0][1],o.push(n[c][0]),u.push(n[c][1]);return[[Math.floor(Math.min.apply(Math,o)),Math.floor(Math.min.apply(Math,u))],[Math.ceil(Math.max.apply(Math,o)),Math.ceil(Math.max.apply(Math,u))]]}return t},render:function(){r.superclass.render.call(this),this.canvas.save();var t=this._geometry.getBounds(),a=[this.shiftBy[0]+t[0][0],this.shiftBy[1]+t[0][1]];if(this.canvas.translate(this.attributes.pixelPerfect?Math.round(a[0]):a[0],this.attributes.pixelPerfect?Math.round(a[1]):a[1]),this.attributes.rotation){var a=this.attributes.offset||[0,0];this.canvas.translate(-a[0],-a[1]),this.canvas.rotate(this.attributes.rotation*Math.PI/180),this.canvas.translate(a[0],a[1])}this.attributes.renderLayout({canvasContext:this.canvas,renderAttributes:this.attributes}),this.canvas.restore(),this.renderUpdated()}}),s.registerShape("layout",r),t(r)});}],
[')Z', function (ym) {
ym.modules.define("graphics.render.canvas.shape.Polygon",["util.defineClass","graphics.render.canvas.view","graphics.render.canvas.tech","graphics.render.abstract.shape","graphics.generator.stroke.dash","graphics.util.coordinateCast","graphics.Path"],function(t,e,s,i,r,n,a,o){function h(){h.superclass.constructor.call(this),this.shiftBy=0}function l(t){for(var e=[],s=0,i=t.length;s<i;++s)e.push(o.toArray(t[s]));return e}e(h,s,r.Polygon,{shift:function(t){this.shiftBy=t.slice(0)},fillLine:function(t,e){function s(t){for(var e,s,n=t.length,a=!0,o=0;n;++o,--n)s=e,e=t[o],e?(s&&e[0]==s[0]&&e[1]==s[1]&&(e=[e[0]+.01,e[1]+.01]),i[a?"moveTo":"lineTo"](e[0]+r[0],e[1]+r[1]),a=!1):a=!0}for(var i=this.canvas,r=this.shiftBy||[0,0],n=0,a=t.length;a;--a,++n)s(t[n])},renderLine:function(t){this.canvas.beginPath(),this.fillLine(t)},renderPolygon:function(t){this.renderLine(t,"polygon"),this.canvas.closePath()},render:function(){h.superclass.render.call(this),this.canvas.save();var t=a.toDoubleArray(this.coordinates);this._strokeSet=!1,this.is("line")?(this.renderPolygon(t),this._strokeSet=!0,this.stroke()):(this.renderPolygon(t),this._strokeSet=!0,this.is("polygon-edge")?this.stroke():this.closeAndFill()),this.canvas.restore(),this.renderUpdated()},dropData:function(){this._strokeSet=!1},_fillData:function(t,e){this.renderLine(t),this.is("line")||this.canvas.closePath(),e&&this.canvas[e]()},clipToTile:function(t){var e=t._clippingData;t._clippingData="",t=this.performClippingOn(t,"line",this.shiftBy||[0,0],0),t._clippingData=e},_getFullContour:function(){var t,e=a.toDoubleArray(this.coordinates),s=[],i=e.length;for(t=0;t<i;++t)s.push(o.fromArray(e[t]));return s},updateGeometry:function(){this._pathCache={},this._strokeSet=!1,!this.is("line")&&this.coordinates&&this.changeAttributes({fillRule:this.coordinates.getFillRule()}),h.superclass.updateGeometry.call(this)},drawStroke:function(t,e){var s=!0,i=0;if(e.setup.generator&&(s=!1,i=this._pathCache[t],i||(i=this._getFullContour(),this._pathCache[t]=i=e.setup.generator(i))),e.setup.dash&&!this.isNativeStrokeStyleSupported()){i=i||this._getFullContour(),s=!1,this.clipToTile(i);for(var r=[],o=0,h=i.length;o<h;++o)r.push(n.stroke(i[o],e.setup.dash,e.setup.offset||0));i=r}if(s){var c=a.toDoubleArray(this.coordinates);this._fillData(c,"stroke"),this._strokeSet=!0}else i&&(this.renderLine(l(i)),this.is("line")||this.canvas.closePath(),this.canvas.stroke()),this._strokeSet=!1}}),i.registerShape("polygon-filled",h),i.registerShape("line",h),t(h)});}],
[',a', function (ym) {
ym.modules.define("graphics.render.canvas.shape.Rectangle",["util.defineClass","graphics.render.canvas.view","graphics.render.canvas.tech","graphics.render.abstract.shape"],function(t,e,r,i,a){function s(){s.superclass.constructor.call(this)}e(s,r,a.Rectangle,{_renderElement:function(){var t,e,r,i,a,s=this.canvas,h=.5*this.getDeltaWidth(),o=0;this.attributes.pixelPerfect?(t=h-Math.floor(h),e=Math.floor(this.rattr.leftTop[0])+t,r=Math.floor(this.rattr.leftTop[1])+t,i=Math.ceil(this.rattr.rightBottom[0]-e),a=Math.ceil(this.rattr.rightBottom[1]-r)):(t=0,e=this.rattr.leftTop[0]+t,r=this.rattr.leftTop[1]+t,i=this.rattr.rightBottom[0]-e,a=this.rattr.rightBottom[1]-r),this.attributes.radius&&(o=Math.min(.5*i,.5*a,this.parseRadius(this.attributes.radius))),s.beginPath(),s.moveTo(e+o,r),s.lineTo(e+i-o,r),o&&s.quadraticCurveTo(e+i,r,e+i,r+o),s.lineTo(e+i,r+a-o),o&&s.quadraticCurveTo(e+i,r+a,e+i-o,r+a),s.lineTo(e+o,r+a),o&&s.quadraticCurveTo(e,r+a,e,r+a-o),s.lineTo(e,r+o),o&&s.quadraticCurveTo(e,r,e+o,r),s.closePath()},render:function(){s.superclass.render.call(this),this.shiftShape(this.shiftBy),this._renderElement(),this.closeAndFill(),this.renderUpdated()}}),i.registerShape("rectangle",s),t(s)});}],
['_g', function (ym) {
ym.modules.define("graphics.render.canvas.shapes",["graphics.render.canvas.shape.Ellipse","graphics.render.canvas.shape.Polygon","graphics.render.canvas.shape.Rectangle","graphics.render.canvas.shape.Holed","graphics.render.canvas.shape.Image","graphics.render.canvas.shape.Layout","graphics.render.canvas.paneView"],function(a,e,s,r,n,c,p,h){a({})});}],
['_h', function (ym) {
ym.modules.define("graphics.render.canvas.support",["graphics.render.canvas.shapes"],function(e,s){e()});}],
['_k', function (ym) {
ym.modules.define("graphics.render.canvas.tech",["util.defineClass","graphics.render.base.tech","graphics.render.factory","graphics.render.canvas.pane"],function(e,r,n,a,c){function s(){s.superclass.constructor.call(this)}r(s,n,{createPane:function(){return new c}});var t=new s;a.registerInterface("Canvas",t,1),e(t)});}],
['_l', function (ym) {
ym.modules.define("graphics.render.canvas.util",["util.dom.element","util.hd"],function(e,t,a){var n=258,i=0,r=0,c=0,l=0,h=t.create("canvas"),s=h.getContext&&h.getContext("2d");e(i={scaleFactor:function(e){return Math.max(1,a.getPixelRatio()/a.getBackingStorePixelRatio(e||s))},createPBuffer:function(e,a){var r=t.create("canvas"),h=r.getContext("2d"),s=i.scaleFactor(h);return r.width=h.width=Math.max(n,e*s),r.height=h.height=Math.max(n,a*s),{index:c++,element:r,canvas:h,size:[e,a],lock:function(){l++},release:function(){l--,this.element=null,this.canvas=null}}},preparePatternFill:function(e,a,n,i){if(!e&&1==a)return n;var r=t.create("canvas"),c=r.getContext("2d"),l=1/i,h=n.width*l,s=n.height*l;return r.width=h,r.height=s,e&&(c.fillStyle=e,c.fillRect(0,0,h,s)),c.globalAlpha=a,c.drawImage(n,0,0,h,s),r},tempPBuffer:function(e,t){var a=r||i.createPBuffer(e,t),c=i.scaleFactor(a.canvas);return a.size&&a.size[0]==e&&a.size[1]==t?a.canvas.clearRect(0,0,e*c,t*c):(a.size=[e,t],a.element.width=Math.max(n,e*c),a.element.height=Math.max(n,t*c)),a.canvas.setTransform(1,0,0,1,0,0),a.canvas.beginPath(),a.lock(),a}})});}],
['_m', function (ym) {
ym.modules.define("graphics.render.canvas.view",["util.defineClass","graphics.render.base.view","util.pixelBounds","graphics.render.canvas.util","graphics.render.canvas.tech"],function(t,a,s,i,e,r){function l(){l.superclass.constructor.call(this)}var n=e.scaleFactor,h="AndroidBrowser"==ym.env.browser.name||"Presto"==ym.env.browser.engine;a(l,s,{createPane:function(){return r.createPane()},registerShape:function(t,a){r.registerShape(t,a)},paneName:function(){return"canvas"},setPane:function(t){l.superclass.setPane.apply(this,arguments)},willAttributeReflow:function(t){return!0},_createColor:function(t,a){return a&&(t=t.slice(0),t[3]=a),4==t.length?"rgba("+t.join(",")+")":"rgb("+t.join(",")+")"},_onFillImageLoad:function(t,a){this.attributes&&(this.attributes.fillPattern=null),l.superclass._onFillImageLoad.call(this,t,a)},setStyles:function(t){this.setFillStyles(t),this.canvas.globalAlpha=this.temporaryCanvas?1:this.attributes.opacity},setLineStyles:function(t,a){this.canvas.lineWidth=t.width||0,this.canvas.strokeStyle=t.color?this._createColor(t.color,a.alpha):"transparent",this.canvas.lineJoin="round",this.canvas.lineCap="round",this.isNativeStrokeStyleSupported()&&(this.canvas.setLineDash(t.setup.dash?t.setup.dash:[]),this.canvas.lineDashOffset=+(t.setup.offset||0))},isNativeStrokeStyleSupported:function(){return this.canvas.setLineDash&&!h},setFillStyles:function(t){if(t=t||{},this._hasStretchFill()&&(t.alpha=1),this.canvas.fillStyle=this.attributes.fill?this._createColor(this.attributes.fill.color,t.alpha):"transparent",this.attributes.fill.background&&this.attributes.fill.background.image){if("tile"==this.attributes.fill.background.style){var a=this.attributes.fill.color?this._createColor(this.attributes.fill.color,!1):"transparent",s=a+"_"+this.attributes.fill.extOpacity;if(this.attributes.fillPattern&&this.attributes.fillPatternCacheId==s);else{var i=this.attributes.fill.background.image;this.attributes.fillPattern=this.canvas.createPattern(e.preparePatternFill(a,this.attributes.fill.extOpacity,i.image,i.scaleRatio),"repeat"),this.attributes.fillPatternCacheId=s}t.alpha||(this.canvas.fillStyle=this.attributes.fillPattern)}}else this.attributes.fillPattern=null},applyDynamicStyles:function(){},closeAndFill:function(){if(this.attributes.fill&&(this.attributes.fill.extOpacity||this.attributes.fill.image)){var t="evenOdd"==this.attributes.fill.fillRule?"evenodd":"nonzero";this.canvas.msFillRule=t,this.canvas.fill(t),this.applyBackgroundFill()}this.stroke()},stroke:function(t){var a,s=0;if(this.attributes.stroke)for(;a=this.getStrokeSettings(s);)this.isVisibleStroke(a)&&(this.setLineStyles(a,{}),this.drawStroke(s,a)),s++},drawStroke:function(t,a){this.canvas.stroke()},holder:function(){return this.temporaryCanvas?this.temporaryCanvas.element:this.pane.holder()},needCanvasLock:function(){return this._hasBackgroundFill()||this.attributes.opacity<1&&this.attributes.stroke&&this.attributes.fill.exists},lockCanvas:function(t,a,s,r){if(this.tempCanvas=0,t.save(),this.needCanvasLock()){var l=this.pane.calculateLockRegion(this),h=i.getSize(l);this.temporaryCanvas=e.tempPBuffer(h[0],h[1]),this.temporaryCanvas.offset=[s[0]-l[0][0],s[1]-l[0][1]],this.temporaryCanvas.canvas.save(),this.temporaryCanvas.canvas.setTransform(1,0,0,1,0,0);var o=n(this.temporaryCanvas.canvas);return this.temporaryCanvas.canvas.scale(o,o),this.temporaryCanvas.canvas.transform(1,0,0,1,this.temporaryCanvas.offset[0],this.temporaryCanvas.offset[1]),this.canvas=this.temporaryCanvas.canvas}return this.canvas=t,t.scale(n(t),n(t)),t},releaseCanvas:function(t,a){if(this.temporaryCanvas){var s=(this.getBounds(),n(a));a.globalAlpha=this.attributes.opacity,a.drawImage(this.temporaryCanvas.element,-this.temporaryCanvas.offset[0]*s,-this.temporaryCanvas.offset[1]*s),a.globalAlpha=1,a.restore(),this.temporaryCanvas.release(),this.temporaryCanvas=0}else a.restore();this.canvas.globalAlpha=1},_hasBackgroundFill:function(){return this.attributes.fill&&this.attributes.fill.background&&this.attributes.fill.background.image},_hasStretchFill:function(){return this._hasBackgroundFill()&&"stretch"==this.attributes.fill.background.style},_hasTileFill:function(){return this._hasBackgroundFill()&&"tile"==this.attributes.fill.background.style},applyBackgroundFill:function(){if(this._hasStretchFill()&&this.attributes.fill.background.image){var t=this.getBounds(),a=this.canvas.globalAlpha;this.canvas.globalAlpha=this.attributes.fill.extOpacity,this.canvas.globalCompositeOperation="source-in",this.canvas.drawImage(this.attributes.fill.background.image.image,t[0][0]+this.shiftBy[0],t[0][1]+this.shiftBy[1],t[1][0]-t[0][0],t[1][1]-t[0][1]),this.canvas.globalCompositeOperation="source-over",this.canvas.globalAlpha=a}},render:function(){this.setStyles(),this.fixTileFill()},fixTileFill:function(){if(this._hasTileFill()&&this.attributes.fill.background.image){var t=this.shiftBy,a=this.getBounds(),s=this.attributes.fill.background.image.size,i=[t[0]+a[0][0],t[1]+a[0][1]],e=n(this.canvas),r=i[0]%(e*s[0]),l=i[1]%(e*s[1]);this.shiftBy[0]-=r,this.shiftBy[1]-=l,this.canvas.translate(r,l),this.deltaOffset=[r,l]}else this.deltaOffset=[0,0]}}),t(l)});}],
[',d', function (ym) {
ym.modules.define("graphics.render.detect.bestMatch",function(r){switch(r.env.browser.graphicsRenderEngine){case"canvas":return["graphics.render.canvas.support"];case"svg":return["graphics.render.svg.support"];case"vml":return["graphics.render.vml.support"]}return[]},function(r,e){r(e)});}],
['_n', function (ym) {
ym.modules.define("graphics.render.factory",[],function(r){function e(r){for(var e in n)if(n.hasOwnProperty(e)&&n[e].driver.isShapeSupported(r))return e;return!1}function t(r,t){return e(r)}var n={},i={create:function(r,i){var o=i&&"!"==i.charAt(0),a=i;if(o&&(i=i.substr(1)),i=i?i.toLowerCase():e(r),i&&this.isSupported(r,i)||(i&&!this.isSupported(i,i)&&(i=null),i=o?null:t(r,i)),!i)throw new Error("Graphics.Factory.Create: "+a+": "+r+" - не известный примитив");return n[i].driver.createShape(r)},createPane:function(r){return n[r].driver.createPane()},listRenders:function(){var r=[];for(var e in n)n.hasOwnProperty(e)&&r.push(e);return r},isSupported:function(r,t){return t=t?t.toLowerCase():null,r=r.toLowerCase(),t?t in n&&("*"==r||n[t].driver.isShapeSupported(r)):e(r)},registerInterface:function(r,e){n[r.toLowerCase()]={name:r,driver:e}}};r(i)});}],
['4N', function (ym) {
ym.modules.define("graphics.shape",["util.defineClass","util.augment","graphics.shape.Base","util.vector","graphics.Path"],function(e,t,r,s,i,o){var n={setGeometry:function(e){this.coordinates=e,this.updateView()},getBounds:function(){return this.coordinates.getBounds()}},c=function(e){c.superclass.constructor.call(this,e)};t(c,s,n,{setupGeometry:function(e){e.circle(this.coordinates)},createGraphics:function(e){return this.invokeGraphicsFabric("circle",e.render,e)}});var a=function(e){this.renderMode="line",a.superclass.constructor.call(this,e)};t(a,s,n,{setupGeometry:function(e){e.line(this.coordinates)},createGraphics:function(e){return this.invokeGraphicsFabric(this.renderMode,e.render,e)}});var u=function(e){this.renderMode="polygon-edge",u.superclass.constructor.call(this,e)};t(u,a,{_isClosedShape:1,setupGeometry:function(e){e.polygon(this.coordinates)}});var l=function(e){l.superclass.constructor.call(this,e),this.renderMode="polygon-filled"};t(l,u);var h=function(e,t){h.superclass.constructor.call(this,e),this.simpleHoled=t,this.renderMode="polygon-holed"+(t?"-simple":"")};t(h,l,{setupGeometry:function(e){e.polygonWithHole(this.coordinates)}});var d=function(e){d.superclass.constructor.call(this,e)};t(d,s,n,{setupGeometry:function(e){e.setGeometry(this.coordinates)},createGraphics:function(e){return this.invokeGraphicsFabric("rectangle",e.render,e)}});var p=function(e){p.superclass.constructor.call(this,e),this.renderMode="image"};t(p,s,n,{setupGeometry:function(e){e.image(this.coordinates.getBounds()[0])},createGraphics:function(e){return this.invokeGraphicsFabric(this.renderMode,e.render,e)}}),e({Circle:c,Line:a,EdgePolygon:u,FilledPolygon:l,PolygonWithHoles:h,Rectangle:d,Image:p})});}],
['_o', function (ym) {
ym.modules.define("graphics.shape.Base",["util.defineClass","util.augment","util.extend","util.dom.style","util.pixelBounds","event.Manager","Event","graphics.render.factory"],function(e,t,n,i,s,r,h,a,o){var p=function(e){this._graphicRepresentation=null,this._renderOptions=null,this.events=new h,this._hasTunedGraphics=!1,e&&this.setGeometry(e)},d="geometryUpdate",c="geometryModify",_="needRedraw";t(p,{CLIPPING_DELTA_OFFSET:256,CLIPPING_DELTA_JITTER:128,setRenderOptions:function(e){this._renderOptions=e,this._topPane&&(this._topPane.setZIndex(e.zIndex),this._topPane.setOrder(e.zOrder)),this._hasTunedGraphics?this.getGraphics(this._renderOptions).changeAttributes(this._renderOptions):this.getGraphics(this._renderOptions),this.isDynamic=e.isDynamic},getZIndex:function(){return this._renderOptions&&this._renderOptions.zIndex||0},getZOrder:function(){return this._renderOptions&&this._renderOptions.zOrder||0},getGraphics:function(e){e&&(this._renderOptions=e);var t=this.getGraphicRepresentation(e);return this._hasTunedGraphics?t:(this.setupGeometry(t),this._hasTunedGraphics=!0,this.patchGraphics(t))},getGraphicRepresentation:function(e){if(!this._graphicRepresentation){var t=e||this._renderOptions;t&&(this._graphicRepresentation=this.createGraphics(t),this._graphicsEvents=this._graphicRepresentation.events.group(),this._graphicsEvents.add(d,this._onGeometryChange,this),this._graphicsEvents.add(c,this._onGeometryModify,this),this._graphicsEvents.add(_,this._onRedrawAsk,this)),this._hasTunedGraphics=!1}return this._graphicRepresentation},_onGeometryChange:function(){this.events.fire(d)},_onGeometryModify:function(){this.events.fire(c)},_onRedrawAsk:function(){this.events.fire(_)},invokeGraphicsFabric:function(e,t,n){return o.create(e,t,n)},createGraphics:function(e){},setupGeometry:function(e){},patchGraphics:function(e){return e.setBounds(this.getBounds()),e.setAttributes(this._renderOptions),e},flush:function(){this._topPane&&this._topPane.flush()},getBounds:function(){return null},updateView:function(e){var t=this.getGraphicRepresentation();t&&this.setupGeometry(t),t&&t.setBounds(this.getBounds()),e&&t&&(this.reposite(),this.flush())},update:function(){var e=this.getGraphicRepresentation();e&&e.updateGeometry()},setActiveRegion:function(e,t){this.activeRegion={region:r.clone(e)};var n=this.getGraphicRepresentation().getPane();n&&n.updateClipping(e,!1,t)},reposite:function(){var e=!1;if(this._topPane){if(this.setActiveRegion(this._containerPane.getVisibleBounds(this.CLIPPING_DELTA_OFFSET),this.CLIPPING_DELTA_JITTER),this._topPane.margin){var t=this._containerPane.toClientPixels([this._topPane.margin.left,this._topPane.margin.top]),n=this._topPane.clippingOffset;s.setPosition(this._topPane.holder(),[t[0]+n[0],t[1]+n[1]]),this._topPane.isClipped()&&(e=!0)}return this._topPane.setZIndex(this._renderOptions.zIndex),this._topPane.setOrder(this._renderOptions.zOrder),s.css(this._topPane.holder(),{zIndex:this._renderOptions.zIndex}),e||this._topPane.isChanged()}return!1},setContainerPane:function(e){this._containerPane=e,this._containerPane.add(this)},attachToContainer:function(){if(!this._topPane){var e=this.getGraphics();this._topPane=e.createPane(),this._topPane.setPositionPolicy(!1,!1),this._topPane.addShape(e),this._topPane.onRenderEnd(this.reposite,this),this._topPane.events.add("orderChange",this._onPaneOrderChange,this)}this.reposite()},detachFromContainer:function(){if(this._topPane&&this._topPane){this._topPane.events.remove("orderChange",this._onPaneOrderChange,this),this._topPane.removeAll();var e=this._topPane.holder();e.parentNode&&e.parentNode.removeChild(e),this._topPane=null}},isClipped:function(){var e=this.getPane();return!!e&&e.isClipped()},getPane:function(){return this._topPane},getTechName:function(){return this.getGraphicRepresentation().paneName()},_onPaneOrderChange:function(){this.events.fire("orderChange",new a({sender:this}))},removeFromContainer:function(){this._containerPane?this._containerPane.remove(this):this.detachFromContainer(),this._graphicsEvents&&this._graphicsEvents.removeAll(),this._graphicsEvents=null,this._graphicRepresentation=null}}),e(p)});}],
['4O', function (ym) {
ym.modules.define("graphics.shape.Layout",["util.defineClass","graphics.shape.Base"],function(e,t,s){var i=function(e){this.renderMode="layout",i.superclass.constructor.call(this,e),this._coordinates=e};t(i,s,{setGeometry:function(e){this._coordinates=e,this.updateView()},getBounds:function(){return this._coordinates.getBounds()},setupGeometry:function(e){e.setGeometry(this._coordinates)},createGraphics:function(e){return this.invokeGraphicsFabric(this.renderMode,e.render,e)}}),e(i)});}],
['4S', function (ym) {
ym.modules.define("graphics.util.color",["util.instantCache"],function(e,r){function n(e,n){if(e){var t,a="decodeColor_ "+e+"_"+n;if(r.get(a))return r.get(a);if("undefined"==typeof n&&(n=1),0===e.indexOf("rgba("))t=e.substr(5,e.length-6).split(",");else if(0===e.indexOf("rgb("))t=(e.substr(4,e.length-5)+",1").split(",");else{"#"===e.charAt(0)&&(e=e.substr(1,e.length-1));var i=parseInt("0x"+e);switch(+i!==i&&(e="not-a-hex"),e.length){case 3:t=[i>>8&15,i>>4&15,15&i,1],t[0]+=t[0]<<4,t[1]+=t[1]<<4,t[2]+=t[2]<<4;break;case 4:t=[i>>12&15,i>>8&15,i>>4&15,15&i],t[0]+=t[0]<<4,t[1]+=t[1]<<4,t[2]+=t[2]<<4,t[3]+=t[3]<<4,t[3]/=255;break;case 6:t=[i>>16&255,i>>8&255,255&i,1];break;case 8:t=[i>>24&255,i>>16&255,i>>8&255,(255&i)/255];break;default:throw new Error("graphics.RGBAColor: формат данных не распознан")}}return t[3]*=n,r.add(a,t),t}return e}function t(e){var r=parseInt(e).toString(16);return 1==r.length?"0"+r:r}function a(e){return ym.env.browser.oldIE?"#"+t(e[0])+t(e[1])+t(e[2]):4==e.length?"rgba("+e.join(",")+")":"rgb("+e.join(",")+")"}function i(e){return a(n(e))}function s(e){if("transparent"==e)return 255;var r=n(e);return 0===parseInt(r[3])?255:.2126*parseInt(r[0])+.7152*parseInt(r[1])+.0722*parseInt(r[2])}e({encode:a,decode:n,convert:i,calculateLuminosity:s})});}],
['4T', function (ym) {
ym.modules.define("graphics.util.coordinateCast",[],function(e){e({toDoubleArray:function(e){switch(e.getType()){case"LineString":return[e.getCoordinates()];case"Point":return[[e.getCoordinates()]];default:return e.getCoordinates()}}})});}],
['4U', function (ym) {
ym.modules.define("graphics.util.image",["util.hd","util.imageLoader"],function(e,n,i){function a(e,t,o){if("string"==typeof e)i.load(n.selectValue(e),t,o);else if(e instanceof window.HTMLImageElement||e instanceof Image||e instanceof window.HTMLCanvasElement||window.CanvasRenderingContext2D&&e instanceof window.CanvasRenderingContext2D||window.ImageBitmap&&e instanceof window.ImageBitmap)t.call(o,e,!0);else if(window.SVGElement&&e instanceof SVGElement)a("data:image/svg+xml;base64,"+btoa(e.outerHTML),t,o);else if(e instanceof HTMLElement)t.call(o,e,!0);else if("object"==typeof e)i.load(n.selectValue(e),function(e,i){e.scaleRatio=n.selectRatio(this._activeFillImageHref),t.call(o,e,i)});else{if("function"!=typeof e)throw new Error("YMaps: undefined image source",e);e(function(e){return a(e,t,o)})}}e({load:a})});}],
['4X', function (ym) {
ym.modules.define("graphics.util.stroke",["util.array","graphics.Path","util.instantCache"],function(e,t,r,o){function n(e,t){if("undefined"==typeof presetStyle&&(t=d),"string"==typeof e&&(e=[e]),1==e.length&&"string"==typeof e[0]&&e[0]){var r=e[0].toLowerCase();if(r in t)return t[r];throw new Error("graphics.render.styles.stroke - не известный стиль "+r)}if(e.length)return e}function s(e,s,i){if(!e)return{};var d;if("undefined"==typeof i&&"string"==typeof e&&(d="decodeStrokeStyle_"+e+"_"+s,o.get(d)))return o.get(d);if("string"==typeof e?e={style:e.replace(/,/g," ").split(" ")}:t.isArray(e)&&(e={style:e}),!e.style)throw new Error("graphics.graphics.render.util.decodeStrokeStyle:стиль не определен");var l="offset"in e?+e.offset:null;isNaN(l)&&(l=0);var f=0;e.generator&&(f=function(t){var o,n=[],s=t.length;for(o=0;o<s;++o)n[o]=r.toArray(t[o]);for(n=e.generator(n),o=0;o<s;++o)n[o]=r.fromArray(n[o]);return n});var h=e.style?a(n(e.style,i),s):null,g="string"==typeof e.style?[e.style]:e.style,y={dash:h,originalPreset:g,offset:l,generator:f};return d&&o.add(d,y),y}function i(e,t){return t=t||1,{width:t,style:s(e)}}var a=function(e,t){for(var r=[],o=0,n=e.length;n;++o,--n){var s=e[o]*t||1;if(isNaN(s)){if(ym.env.debug)throw new Error("graphics.graphics.render.util.decodeStrokeStyle:"+e[o]+" не является числом")}else r.push(s)}return r.length?r:null},d={solid:!1,shortdash:[2,2],shortdot:[0,2],shortdashdot:[2,2,0,2],shortdashdotdot:[2,2,0,2,0,2],dot:[1,2],dash:[4,2],longdash:[8,2],dashdot:[4,2,1,2],longdashdot:[8,2,1,2],longdashdotdot:[8,2,1,2,1,2]};e({decodeStyle:s,decode:i})});}],
['.q', function (ym) {
ym.modules.define("overlay.Base",["util.defineClass","event.Manager","event.Mapper","overlay.component.LayoutEventMappingTable","option.Manager","overlay.optionMapper","Monitor","interactivityModel.EventController","Event","overlay.PaneController"],function(t,e,n,i,a,o,s,h,r,p,l){function u(t,e,i){if(ym.env.debug&&!t)throw new Error("BaseOverlay: не передана пиксельная геометрия");this._geometry=t,this._data=e,this.options=new o(i,null,null,s),this.options.events.add("change",this._onOptionsChange,this),this.monitor=new h(this.options),this.events=new n({context:this}),this._map=null,this._shape=c,this._eventMapper=null,this._interactivityEventController=null,this._paneController=null}var c={};e(u,{setMap:function(t){if(this._map!=t){var e=this._map;e&&(this.removeFromMap(e),this._paneController.destroy(),this._clearInteractivity(),this.monitor.removeAll()),this._map=t,this._map&&(this.bindOptions(this.monitor),this._setupInteractivity(),this._paneController=new l(this.resolvePane(this.monitor.get("pane")),{onZoomChange:this.onPaneZoomChange,onClientPixelsChange:this.onPaneClientPixelsChange},this),this.addToMap()),this.updateShape(),this._fireMapChange(e)}},getMap:function(){return this._map},bindOptions:function(t){t.add("interactivityModel",this._onInteractivityModelChange,this).add("pane",this.onPaneChange,this,{defaultValue:this.getDefaultPane()}).add("zIndex",this.onZIndexChange,this).add("offset",this.onOffsetChange,this)},_fireMapChange:function(t){this.events.fire("mapchange",new p({oldMap:t,newMap:this._map,type:"mapchange",target:this}))},setGeometry:function(t){if(t!=this._geometry){var e=this._geometry;this._geometry=t,this._map&&this.applyGeometry(),this.updateShape(),this._fireGeometryChange(e)}},getGeometry:function(){return this._geometry},applyGeometry:function(){},_fireGeometryChange:function(t){this.events.fire("geometrychange",new p({oldGeometry:t,newGeometry:this._geometry,target:this,type:"geometrychange"}))},setData:function(t){var e=this._data;this._data=t,this._map&&this.applyData(),this._fireDataChange(e)},getData:function(){return this._data},applyData:function(){},_fireDataChange:function(t){this.events.fire("datachange",new p({oldData:t,newData:this._data,type:"datachange",target:this}))},getShape:function(){return this._shape==c?this._shape=this.createShape():this._shape},createShape:function(){return null},updateShape:function(){this._shape=c,this._map&&this.applyShape(),this.events.fire("shapechange")},applyShape:function(){},isEmpty:function(){return!1},getPane:function(){var t=this.monitor.get("pane");return t?this.resolvePane(t):null},onPaneChange:function(t){this._paneController.setPane(this.resolvePane(t))},resolvePane:function(t){return this.getMap().panes.get(t)},getOffsetGeometry:function(t){var e=this.monitor.get("offset");return e?t.shift(e):t},onOffsetChange:function(){this.applyGeometry(),this.updateShape()},_setupInteractivity:function(){this._interactivityEventController=new r(this.monitor.get("interactivityModel")),this.events.addController(this._interactivityEventController)},_clearInteractivity:function(){this.events.removeController(this._interactivityEventController),this._interactivityEventController=null},_onInteractivityModelChange:function(t){this._interactivityEventController.setInteractivityModel(t)},getEventMapper:function(){return this._eventMapper||(this._eventMapper=new i(this.events,new a(this)))},_onOptionsChange:function(){this.events.fire("optionschange")}}),t(u)});}],
['.j', function (ym) {
ym.modules.define("overlay.BaseInteractive",["util.defineClass","overlay.Base","overlay.view.Hotspot"],function(e,t,n,o){function s(e,t,n){s.superclass.constructor.call(this,e,t,n),this._hotspotView=null}t(s,n,{bindOptions:function(e){s.superclass.bindOptions.call(this,e),e.add("eventsPane",this.onEventsPaneChange,this,{defaultValue:this.getDefaultEventPane()})},getDefaultEventPane:function(){return"events"},getEventPane:function(){var e=this.monitor.get("eventsPane");return e?this.resolvePane(e):null},addToMap:function(){this._hotspotView=new o({shape:this.getShape(),options:this.options,eventMapper:this.getEventMapper(),containerPane:this.resolvePane(this.monitor.get("pane")),pane:this.resolvePane(this.monitor.get("eventsPane")),zIndex:this.monitor.get("zIndex"),monitorInteractiveOption:this.monitorInteractiveOption()})},removeFromMap:function(){this._hotspotView.destroy()},applyShape:function(){this._hotspotView.setShape(this.getShape())},onZIndexChange:function(e){this._hotspotView.setZIndex(e)},onPaneChange:function(e){s.superclass.onPaneChange.call(this,e),this._hotspotView.setContainerPane(this.resolvePane(e))},onEventsPaneChange:function(e){this._hotspotView.setPane(this.resolvePane(e))},onPaneClientPixelsChange:function(){},onPaneZoomChange:function(e){this._hotspotView.setShape(this.calculateScaledShape(e))},calculateScaledShape:function(e){var t=this.getShape();return t&&e&&(t=t.scale(Math.pow(2,e))),t}}),e(s)});}],
[':A', function (ym) {
ym.modules.define("overlay.BaseInteractiveGraphics",["util.defineClass","overlay.BaseInteractive"],function(t,e,a){function r(t,e,a){r.superclass.constructor.call(this,t,e,a),this._graphicsOverlay=null}e(r,a,{getDefaultPane:function(){return"areas"},monitorInteractiveOption:function(){return!0},addToMap:function(){this._setupGraphicsOverlay(),r.superclass.addToMap.call(this)},removeFromMap:function(){r.superclass.removeFromMap.call(this),this._clearGraphicsOverlay()},applyGeometry:function(){this._graphicsOverlay&&this._graphicsOverlay.setGeometry(this.createStaticOverlayGeometry())},createStaticOverlayGeometry:function(){return this.getGeometry()},_setupGraphicsOverlay:function(){this._createStaticOverlay(this.getStaticOverlayClass())},_createStaticOverlay:function(t){var e=this.getMap();e&&(this._graphicsOverlay=new t(this.createStaticOverlayGeometry(),this.getData()),this._graphicsOverlay.options.setParent(this.options),this._graphicsOverlay.setMap(e))},_clearGraphicsOverlay:function(){this._graphicsOverlay&&(this._graphicsOverlay.setMap(null),this._graphicsOverlay.options.setParent(null),this._graphicsOverlay=null)}}),t(r)});}],
['.i', function (ym) {
ym.modules.define("overlay.BaseWithShadow",["util.defineClass","overlay.BaseWithView","overlay.view.Dom","overlay.PaneController","option.Manager","option.Mapper","overlay.optionMapper","map.pane.helper.shadows","vow","util.extend"],function(e,t,o,a,s,i,n,h,w,d,r){function l(e,t,o){l.superclass.constructor.call(this,e,t,o),this._shadowView=null}l.WasNotAddedToMap=function(){return new Error("Overlay wasn't added to map")},t(l,o,{bindOptions:function(e){l.superclass.bindOptions.call(this,e),e.add("shadow",this._onShadowChange,this)},addToMap:function(){l.superclass.addToMap.call(this),this.monitor.get("shadow")&&(this.monitor.add("shadowsPane",this._onShadowPaneChange,this,{defaultValue:this.getDefaultShadowPane()}),this._shadowPaneController=new s(this.resolvePane(this.monitor.get("shadowsPane")),{onZoomChange:this.onShadowPaneZoomChange,onClientPixelsChange:this.onShadowPaneClientPixelsChange},this),this._setupShadowView())},removeFromMap:function(){this.monitor.get("shadow")&&(this._clearShadowView(),this._shadowPaneController.destroy(),this.monitor.remove("shadowsPane")),l.superclass.removeFromMap.call(this)},getShadowPane:function(){var e=this.monitor.get("shadowsPane");return e?this.resolvePane(e):null},applyGeometry:function(){l.superclass.applyGeometry.call(this),this._shadowView&&this.applyGeometryToView(this._shadowView,this.getOffsetGeometry(this.getGeometry()))},getShadowLayout:function(){return this._shadowView?this._shadowView.getLayout():d.reject(l.WasNotAddedToMap())},getShadowLayoutSync:function(){return this._shadowView&&this._shadowView.getLayoutSync()},getShadowElement:function(){return this._shadowView&&this._shadowView.getElement()},getDefaultShadowPane:function(){return"shadows"},onShadowPaneClientPixelsChange:function(){this.applyGeometryToView(this._shadowView,this.getOffsetGeometry(this.getGeometry()))},onShadowPaneZoomChange:function(e){var t=this.getGeometry();e&&(t=t.scale(Math.pow(2,e))),this.applyGeometryToView(this._shadowView,this.getOffsetGeometry(t))},_setupShadowView:function(){this._shadowView=this.createShadowView()},getShadowView:function(){return this._shadowView},createShadowView:function(){var e={position:this.geometryToViewPosition(this.getOffsetGeometry(this.getGeometry())),data:this.getData(),options:new i({},this.options,"shadow"),pane:this.resolvePane(this.monitor.get("shadowsPane")),zIndex:this.monitor.get("zIndex")},t=this.getShadowViewClass();return new t(r(e,this.getShadowViewParams()),this.getShadowViewCallbacks())},_clearShadowView:function(){this.destroyShadowView(),this._shadowView=null},destroyShadowView:function(){this._shadowView.destroy()},_onShadowPaneChange:function(e){this._shadowView.setPane(e),this._shadowPaneController.setPane(e)},_onShadowChange:function(e){e?this._setupShadowView():this._clearShadowView()},onZIndexChange:function(e){l.superclass.onZIndexChange.call(this,e),this._shadowView&&this._shadowView.setZIndex(e)}}),h.setRule({name:"shadow",rule:"prefixed"}),h.setRule({name:"shadow",key:["offset"],rule:function(e){return n.addOptionalPrefix(e,"shadow")}}),h.setRule({name:"shadow",key:["projection"],rule:"plain"}),e(l)});}],
['.z', function (ym) {
ym.modules.define("overlay.BaseWithView",["util.defineClass","overlay.Base","overlay.component.DomCursorController","overlay.view.Hotspot","vow","util.extend"],function(e,t,n,i,s,o,a){function r(e,t,n){r.superclass.constructor.call(this,e,t,n),this._view=null,this._hotspotView=null,this._cursorController=null,this._underEventsPaneFlag=null,this._scaledGeometry=null}r.WasNotAddedToMap=function(){return new Error("Overlay wasn't added to map")},t(r,n,{bindOptions:function(e){r.superclass.bindOptions.call(this,e),e.add("eventsPane",this.onEventsPaneChange,this,{defaultValue:this.getDefaultEventPane()}).add("interactive",this.onInteractiveChange,this,{defaultValue:!0})},getDefaultEventPane:function(){return"events"},getEventPane:function(){var e=this.monitor.get("eventsPane");return e?this.resolvePane(e):null},addToMap:function(){this._setupView(),this._setupInteractiveView()},removeFromMap:function(){this._clearInteractiveView(),this._clearView()},monitorInteractiveOption:function(){return!0},applyGeometry:function(){this.applyGeometryToView(this._view,this.getOffsetGeometry(this.getGeometry()))},applyData:function(){this._view.setData(this.getData())},createShape:function(){var e=this._view?this._view.getShape():null;return e?e.shift(this.geometryToViewPosition(this.getOffsetGeometry(this.getGeometry()))):null},applyShape:function(){this.isUnderEventsPane()&&this._hotspotView.setShape(this.getShape())},getLayout:function(){return this._view?this._view.getLayout():o.reject(r.WasNotAddedToMap())},getLayoutSync:function(){return this._view?this._view.getLayoutSync():null},getElement:function(){return this._view?this._view.getElement():null},onZIndexChange:function(e){this._view.setZIndex(e),this.isUnderEventsPane()&&this._hotspotView.setZIndex(e)},isEmpty:function(){var e=this._view||this.createView(),t=e.isEmpty();return e!=this._view&&e.destroy(),t},isUnderEventsPane:function(){if(null===this._underEventsPaneFlag){var e=this.monitor.get("eventsPane");this._underEventsPaneFlag=!!e&&this.getMap().panes.getUpper(this.monitor.get("pane"),e)==e}return this._underEventsPaneFlag},isInteractive:function(){return this.monitor.get("interactive")},_setupView:function(){this._view=this.createView()},getView:function(){return this._view},createView:function(){var e={position:this.geometryToViewPosition(this.getOffsetGeometry(this.getGeometry())),data:this.getData(),options:this.options,pane:this.resolvePane(this.monitor.get("pane")),zIndex:this.monitor.get("zIndex")},t={onShapeChange:{callback:this.updateShape,context:this},onEmptinessChange:{callback:this._emptinessChangeCallback,context:this}},n=this.getViewClass();return new n(a(e,this.getViewParams()),a(t,this.getViewCallbacks()))},_clearView:function(){this.destroyView(this._view),this._view=null},destroyView:function(e){e.destroy()},_setupInteractiveView:function(){this.isUnderEventsPane()?this._setupHotspotView():this._setupCursorController()},_clearInteractiveView:function(){this.isUnderEventsPane()?this._clearHotspotView():this._clearCursorController()},_setupHotspotView:function(){this._hotspotView=new s({shape:this.getShape(),options:this.options,eventMapper:this.getEventMapper(),containerPane:this.resolvePane(this.monitor.get("pane")),pane:this.resolvePane(this.monitor.get("eventsPane")),zIndex:this.monitor.get("zIndex"),monitorInteractiveOption:!0})},_clearHotspotView:function(){this._hotspotView.destroy()},_emptinessChangeCallback:function(e){this.events.fire("emptinesschange",{oldEmptiness:e})},onPaneClientPixelsChange:function(){this.applyGeometryToView(this._view,this.getOffsetGeometry(this.getGeometry())),this.isUnderEventsPane()},onPaneZoomChange:function(e){var t=this.getGeometry();e&&(t=t.scale(Math.pow(2,e))),this._scaledGeometry=this.getOffsetGeometry(t),this.applyGeometryToView(this._view,this._scaledGeometry),this.isUnderEventsPane()&&this._hotspotView.setShape(this.calculateScaledShape(e))},calculateScaledShape:function(){var e=this._view?this._view.getShape():null;return e?e.shift(this.geometryToViewPosition(this._scaledGeometry)):null},_updateInteractiveView:function(e){this.isUnderEventsPane()?e?(this._hotspotView.setContainerPane(this.resolvePane(this.monitor.get("pane"))),this._hotspotView.setPane(this.resolvePane(this.monitor.get("eventsPane")))):(this._clearCursorController(),this._setupHotspotView()):e&&(this._clearHotspotView(),this._setupCursorController())},_setupCursorController:function(){this._view.getElement&&this._view.getElement()&&(this._cursorController=new i(this.monitor,this._view.getElement()))},_clearCursorController:function(){this._cursorController&&(this._cursorController.destroy(),this._cursorController=null)},onPaneChange:function(e){this._view.setPane(this.resolvePane(e)),r.superclass.onPaneChange.call(this,e),this._updateInteractiveView(this._resetUnderEventsPaneFlag())},onEventsPaneChange:function(){this._updateInteractiveView(this._resetUnderEventsPaneFlag())},_resetUnderEventsPaneFlag:function(){var e=this._underEventsPaneFlag;return this._underEventsPaneFlag=null,this.onUnderEventsPaneChange(e),e},onUnderEventsPaneChange:function(){},onInteractiveChange:function(){}}),e(r)});}],
['.Q', function (ym) {
ym.modules.define("overlay.component.DomCursorController",["util.defineClass","util.cursor.Manager"],function(t,o,r){function i(t,o,i,e){this._optionMonitor=t,this._optionName=i||"cursor",this._cursorManager=new r(o),this._optionMonitor.add("interactiveOpt",this._onInteractiveChange,this,{resolveCallback:function(t,o){return o.get("interactive",!0)}}).add(this._optionName,this._onCursorChange,this,{defaultValue:e||"inherit"}),this._setupCursor()}o(i,{destroy:function(){this._clearCursor(),this._optionMonitor.remove(this._optionName).remove("interactiveOpt")},_setupCursor:function(){this._currentCursor=this._cursorManager.push(this._optionMonitor.get("interactiveOpt")?this._optionMonitor.get(this._optionName):"inherit")},_clearCursor:function(){this._currentCursor.remove()},_onCursorChange:function(){this._clearCursor(),this._setupCursor()},_onInteractiveChange:function(){this._clearCursor(),this._setupCursor()}}),t(i)});}],
['.J', function (ym) {
ym.modules.define("overlay.component.globalOrderCounter",[],function(n){var e=0;n(function(){return e++})});}],
['.I', function (ym) {
ym.modules.define("overlay.component.LayoutEventMappingTable",["util.defineClass","constants.mapDomEvents","Event"],function(e,t,n,a){function i(e){this._overlay=e,this._createMappings()}t(i,{_createMappings:function(){for(var e=0,t=n.length;e<t;e++)this[n[e]]=this._defaultMapping;this.parentelementchange=!1,this.emptinesschange=!1,this.shapechange=!1,this["*"]=this._defaultMapping},_defaultMapping:function(e){return new a({type:e.get("type"),target:this._overlay,domEvent:e.get("domEvent"),originalEvent:e},e)}}),e(i)});}],
['6a', function (ym) {
ym.modules.define("overlay.optionMapper",["option.Mapper"],function(e,o){e(new o)});}],
['!a', function (ym) {
ym.modules.define("overlay.PaneController",["util.defineClass"],function(e,t){function n(e,t,n){this._pane=e,this._callbacks=t,this._context=n,this._lastPaneZoom=-1,this._setupPane()}t(n,{setPane:function(e){this._clearPane(),this._pane=e,this._setupPane()},getPane:function(){return this._pane},destroy:function(){this._clearPane()},_setupPane:function(){this._pane&&(this._lastPaneZoom=this._pane.getZoom(),this._pane.events.add("clientpixelschange",this._onClientPixelsChange,this))},_clearPane:function(){this._pane&&(this._pane.events.remove("clientpixelschange",this._onClientPixelsChange,this),this._lastPaneZoom=-1)},_onClientPixelsChange:function(){var e=this._pane.getZoom();e!=this._lastPaneZoom?(this._lastPaneZoom=e,this._callbacks.onZoomChange.call(this._context,e-this._pane.getMap().getZoom())):this._callbacks.onClientPixelsChange.call(this._context)}}),e(n)});}],
['!v', function (ym) {
ym.modules.define({name:"overlay.Placemark",key:"default#placemark",storage:"overlay",depends:["util.defineClass","overlay.BaseWithShadow","overlay.placemark.AvailableViews","canvasLayout.storage","system.browser","util.css","theme.islands.geoObject.meta.full"],declaration:function(e,t,a,n,o,i,s){function r(e,t,a){r.superclass.constructor.call(this,e,t,a),this.options.setName("overlay.Placemark"),this._viewRenderMode="",this._shadowViewRenderMode=""}function d(){this.getView().setLayoutParameters({disableDomEventListening:this.isUnderEventsPane()||!this.isInteractive()})}r.WrongRenderMode=function(){return new Error("Wrong value of renderMode option")},t(r,a,{getIconLayout:function(){return this.getLayout()},getIconLayoutSync:function(){return this.getLayoutSync()},getIconElement:function(){return this.getElement()},applyGeometryToView:function(e,t){e.setPosition(this.geometryToViewPosition(t))},getDefaultPane:function(){return"places"},geometryToViewPosition:function(e){return e.getCoordinates()},bindOptions:function(e){r.superclass.bindOptions.call(this,e),e.add(["renderMode","layout","shadowLayout"],this._onRenderModeChange,this,{defaultValues:{renderMode:"auto"}}),this._viewRenderMode=this._getRenderMode("layout"),this._shadowViewRenderMode=this._getRenderMode("shadowLayout")},getViewCallbacks:function(){return{onLayoutChange:{callback:this._layoutChangeCallback,context:this}}},getViewClass:function(){return this._getViewClass(this._viewRenderMode)},getViewParams:function(){return{layout:{defaultValue:i.oldIE?"default#imageWithContent":"islands#icon"},element:{className:s.addPrefix("placemark-overlay"),patch:{selectable:!1}},eventMapper:this.getEventMapper(),layoutParameters:{disableDomEventListening:this.isUnderEventsPane()||!this.isInteractive()}}},onUnderEventsPaneChange:d,onInteractiveChange:d,getShadowViewCallbacks:function(){return{onLayoutChange:{callback:this._shadowLayoutChangeCallback,context:this}}},getShadowViewClass:function(){return this._getViewClass(this._shadowViewRenderMode)},getShadowViewParams:function(){return{element:{className:s.addPrefix("html-placemark-shadow"),patch:{selectable:!1}},layoutParameters:{disableDomEventListening:!0}}},_onRenderModeChange:function(){var e=this._getRenderMode("layout"),t=this._getRenderMode("shadowLayout");this._viewRenderMode==e&&this._shadowViewRenderMode==t||(this._viewRenderMode=e,this._shadowViewRenderMode=t,this.removeFromMap(),this.addToMap(),this.updateShape())},_layoutChangeCallback:function(){this.events.fire("layoutchange")},_shadowLayoutChangeCallback:function(){this.events.fire("shadowlayoutchange")},_getViewClass:function(e){return"canvas"==e?n.Graphics:"dom"==e?n.Dom:void(ym.env.debug&&r.WrongRenderMode())},_getRenderMode:function(e){var t=this.monitor.get("renderMode");if("auto"==t||"canvas"==t)if(n.Graphics){var a=this.monitor.get(e),i=typeof a;t="function"==i||"undefined"==i?"dom":"string"==i?o.isDefined(a)?"canvas":"dom":a.canvasLayout&&o.isDefined(a.canvasLayout)?"canvas":"dom"}else t="dom";return t}}),e.provide(r)}});}],
[':B', function (ym) {
ym.modules.define("overlay.placemark.AvailableViews",function(a){var s=["layout.svgIcon.canvasFactory","overlay.view.Dom"];return a.supports.graphics.hasCanvas()&&s.push("overlay.view.Graphics"),s},function(a,s,o,r){a(s.hasCanvasSupport()?{Dom:o,Graphics:r}:{Dom:o,Graphics:null})});}],
['!x', function (ym) {
ym.modules.define({name:"overlay.Polyline",key:"default#polyline",storage:"overlay",depends:["util.defineClass","overlay.BaseInteractiveGraphics","shape.LineString","overlay.static.Polyline"],declaration:function(e,t,n,a,i){function l(e,t,n){l.superclass.constructor.call(this,e,t,n),this.options.setName("overlay.Polyline")}t(l,n,{getStaticOverlayClass:function(){return i},createShape:function(){return new a(this.getOffsetGeometry(this.getGeometry()))}}),e.provide(l)}});}],
[':C', function (ym) {
ym.modules.define("overlay.static.Base",["util.defineClass","graphics.renderManager","overlay.Base","Monitor","util.array","overlay.component.globalOrderCounter","error","map.pane.helper.areas","graphics.render.detect.bestMatch"],function(e,t,i,r,n,s,o,a){function h(e,t,i){h.superclass.constructor.call(this,e,t,i),this._graphicsShape=null,this._lastRenderType=null,this._globalCounter=-1}function p(e){function t(e,t,i){a.warnIf(e&&!t,"InputError",i.join(" "))}var i=e.get("strokeWidth",1);if(s.isArray(i)){if(ym.env.debug){var r=e.get("strokeColor",c),n=e.get("strokeStyle",null),o=e.get("strokeOpacity",1);r&&t(s.isArray(r),r.length==i.length,["размерность strokeColor не совпадает.",r,"!==",i.length]),n&&t(s.isArray(n),n.length==i.length,["размерность strokeStyle не совпадает.",n,"!==",i.length]),o&&t(s.isArray(o),o.length==i.length,["размерность strokeExtOpacity не совпадает.",o,"!==",i.length])}return i.length}return 1}function l(e){for(var t=e.get("strokeColor",c),i=s.isArray(t),r=e.get("strokeStyle",null),n=s.isArray(r),o=e.get("strokeWidth",1),a=s.isArray(o),h=e.get("strokeOpacity",1),p=s.isArray(h),l=a?o.length:1,g=[],f=0,u=l;f<u;++f)g.push({strokeColor:(i?t[f]:t)||c,strokeStyle:a&&n?r[f]:r,strokeWidth:+((a?o[f]:o)||0),strokeExtOpacity:+((p?h[f]:h)||1)});return g}var c="0066ffff";t(h,r,{addToMap:function(){this.options.events.add("change",this._onRenderOptionsChange,this),this._globalCounter=o(),this._setupGraphicsShape()},removeFromMap:function(){this._clearGraphicsShape(),this.options.events.remove("change",this._onRenderOptionsChange,this)},getGraphicsShape:function(){return this._graphicsShape},_setupGraphicsShape:function(){this._graphicsShape=this.createGraphicsShape(),this._setShapeOptions(),this._setupGraphicsShapeContainer()},_clearGraphicsShape:function(){this._clearGraphicsShapeContainer(),this._graphicsShape=null},_setupGraphicsShapeContainer:function(){this._graphicsShape.setContainerPane(i.getContainer(this.getMap().panes.get(this.monitor.get("pane")),this.getMap()))},_clearGraphicsShapeContainer:function(){this._graphicsShape.removeFromContainer()},getDefaultPane:function(){return"areas"},onPaneClientPixelsChange:function(){},onPaneZoomChange:function(e){this._graphicsShape.setGeometry(this.getOffsetGeometry(this.getShapeGeometry().scale(Math.pow(2,e))))},getShapeGeometry:function(){return this.getGeometry()},onPaneChange:function(e){h.superclass.onPaneChange.call(this,e),this._clearGraphicsShapeContainer(),this._setupGraphicsShapeContainer()},onZIndexChange:function(){},getRenderOptions:function(){return{opacity:this.options.get("opacity",!1),zIndex:this.options.get("zIndex",0),zOrder:this._globalCounter,render:this.options.get("renderType",null),isDynamic:this.options.get("separateContainer",!1),pixelPerfect:this.options.get("pixelPerfect",!0)}},addStrokeOptions:function(e,t){this.options.get("stroke");if(e.stroke=t||!(0==this.options.get("stroke",this.options.get("outline",!0))),e.stroke){var i=p(this.options);e.stroke=l(this.options);for(var r=+e.stroke[0].strokeWidth,n=0;n<i;++n)r=Math.max(r,e.stroke[n].strokeWidth);e.strokeWidth=r}else e.strokeWidth=0},addFillOptions:function(e){e.fill=!(0==this.options.get("fill",!0)),e.fill?(e.fillImageHref=this.options.get("fillImageHref"),e.fillMethod=this.options.get("fillMethod"),e.fillImageHref&&"tile"!=e.fillMethod?e.fillImageHref&&(e.fillColor="rgba(255,255,255,1)"):e.fillColor=this.options.get("fillColor"),e.fillExtOpacity=this.options.get("fillOpacity",1)):(e.fillColor=!1,e.fillImageHref=!1)},_onRenderOptionsChange:function(){var e=this.getRenderOptions();this._lastRenderType!=e.render?(this._clearGraphicsShape(),this._setupGraphicsShape()):this._graphicsShape.setRenderOptions(e)},_setShapeOptions:function(){var e=this.getRenderOptions();this._graphicsShape.setRenderOptions(e),this._lastRenderType=e.render}}),e(h)});}],
['!E', function (ym) {
ym.modules.define({name:"overlay.static.Polyline",key:"static#polyline",storage:"overlay",depends:["util.defineClass","overlay.static.Base","graphics.shape"],declaration:function(e,t,s,i){function o(e,t,s){o.superclass.constructor.call(this,e,t,s),this.options.setName("overlay.static.Polyline")}t(o,s,{createGraphicsShape:function(){return new i.Line(this.getOffsetGeometry(this.getGeometry()))},applyGeometry:function(){this.getGraphicsShape().setGeometry(this.getOffsetGeometry(this.getGeometry()))},getRenderOptions:function(){var e=o.superclass.getRenderOptions.call(this);return this.addStrokeOptions(e,!0),e}}),e.provide(o)}});}],
[':F', function (ym) {
ym.modules.define("overlay.view.Base",["util.defineClass","Monitor"],function(n,i,t){function o(n){this._zIndex=n.zIndex,this.options=n.options,this.monitor=new t(this.options),this.bindOptions(this.monitor)}i(o,{setZIndex:function(n){this._zIndex=n,this.applyZIndex()},getZIndex:function(){return this._zIndex},destroy:function(){this.monitor.removeAll()}}),n(o)});}],
[':G', function (ym) {
ym.modules.define("overlay.view.BaseWithLayout",["util.defineClass","overlay.view.Base","util.bind","util.extend","util.dom.element","util.dom.style","option.Manager","overlay.view.component.layoutLoader","util.scheduler.strategy.Raf","vow"],function(t,a,e,i,o,s,n,u,h,l,r){function _(t,a){this._position=t.position,this._data=t.data,this._pane=t.pane,this._layoutParams=t.layout||{},this._layoutParameters=t.layoutParameters,this._layoutOptionName=t.layoutOptionName||"layout",this._callbacks=a||{},_.superclass.constructor.call(this,t),this._layout=null,this._layoutData=null,this._layoutDeferred=null,this._layoutLoadHandler=null,this.createLayoutContainer(t),this._viewportChangeHandler=i(this._onViewportChangeTimeout,this),this._viewportChangeScheduler=0,this.setupPane(),this._setupLayout(this._createLayout),this.applyPosition(),this._shape=this._calculateShape(),this._emptiness=this._calculateEmptiness()}_.LayoutNotFound=function(){return new Error("Layout wasn't found")},_.WasNotAddedToMap=function(){return new Error("Overlay wasn't added to map")},a(_,e,{bindOptions:function(t){this._layoutOptions=new u(this._layoutParams.options||{},this.options,this._layoutParams.optionManagerName),t.add(this._layoutOptionName,this._onLayoutChange,this,{defaultValue:this._layoutParams.defaultValue})},setPosition:function(t){this._position=t,this.applyPosition()},getPosition:function(){return this._position},setData:function(t){this._data=t,this._layoutData=null,this._layout&&this._layout.setData(this.getLayoutData())},getData:function(){return this._data},getLayoutData:function(){return this._layoutData||(this._layoutData=o({},this._data,{options:this._layoutOptions}))},setPane:function(t){this.clearPane(),this._pane=t,this.setupPane()},getPane:function(){return this._pane},setupPane:function(){this._pane.getMap().options.get("disableOverlayActiveViewportReaction")||(this._layoutOptions.set("viewport",this._calculateObjectViewport(this._pane.getViewport())),this._pane.events.add("viewportchange",this._onViewportChange,this))},clearPane:function(){this._clearViewportChangeTimeout(),this._pane.events.remove("viewportchange",this._onViewportChange,this)},_onViewportChange:function(){this._clearViewportChangeTimeout(),this._viewportChangeScheduler=new l(this._viewportChangeHandler,this),this._viewportChangeScheduler.start()},_onViewportChangeTimeout:function(){this._layoutOptions.set("viewport",this._calculateObjectViewport(this._pane.getViewport()))},_clearViewportChangeTimeout:function(){this._viewportChangeScheduler&&(this._viewportChangeScheduler.stop(),this._viewportChangeScheduler=0)},_calculateObjectViewport:function(t){var a=this._pane.getMap().getGlobalPixelCenter(),e=this._position,i=[e[0]-a[0],e[1]-a[1]];return[[t[0][0]-i[0],t[0][1]-i[1]],[t[1][0]-i[0],t[1][1]-i[1]]]},getLayout:function(){return this._layoutLoadHandler&&this._layoutLoadHandler.isActive()?(this._layoutDeferred||(this._layoutDeferred=r.defer()),this._layoutDeferred.promise()):this._layout?r.resolve(this._layout):r.reject(_.LayoutNotFound())},getLayoutSync:function(){return this._layout},setLayoutParameters:function(t){this._layoutParameters=t,this._layout&&this._layout.setParameters&&this._layout.setParameters(t)},getLayoutParameters:function(){return this._layoutParameters},_setupLayout:function(t){var a={layout:this.monitor.get(this._layoutOptionName),data:this.getLayoutData(),name:this.getLayoutName()},e=h.get(a);"undefined"==typeof e?this._layoutLoadHandler=h.load(a,this._onLayoutLoadSuccess,this._onLayoutLoadFail,this):t.call(this,e)},_onLayoutLoadSuccess:function(t){this._layout&&this._destroyLayout(),this._createLayout(t),this.applyPosition(),this._callBackLayoutChange(),this.updateShape(),this._updateEmptiness(),this._layoutDeferred&&(this._layoutDeferred.resolve(this._layout),this._layoutDeferred=null)},_onLayoutLoadFail:function(){this._layout&&(this._destroyLayout(),this._callBackLayoutChange(),this.updateShape(),this._updateEmptiness()),this._layoutDeferred&&(this._layoutDeferred.reject(_.LayoutNotFound()),this._layoutDeferred=null)},_callBackLayoutChange:function(){var t=this._callbacks.onLayoutChange;t&&t.callback.call(t.context)},_createLayout:function(t){this._layout=this.createLayout(t),this._layout.events.add("emptinesschange",this._updateEmptiness,this).add("shapechange",this.updateShape,this)},_destroyLayout:function(){this._layout.events.remove("emptinesschange",this._updateEmptiness,this).remove("shapechange",this.updateShape,this),this.destroyLayout(this._layout),this._layout=null},_onLayoutChange:function(t){this._layoutLoadHandler&&this._layoutLoadHandler.isActive()&&this._layoutLoadHandler.cancel(),this._setupLayout(this._onLayoutLoadSuccess)},setCallbacks:function(t){this._callbacks=t},getCallbacks:function(){return this._callbacks},destroy:function(){this._layoutDeferred&&(this._layoutDeferred.reject(_.WasNotAddedToMap()),this._layoutDeferred=null),this._layoutLoadHandler&&this._layoutLoadHandler.isActive()&&this._layoutLoadHandler.cancel(),this._layout&&this._destroyLayout(),this.clearPane(),_.superclass.destroy.call(this)},getLayoutOptions:function(){return this._layoutOptions},getShape:function(){return this._shape},updateShape:function(){this._shape=this._calculateShape();var t=this._callbacks.onShapeChange;t&&t.callback.call(t.context,this._shape)},_calculateShape:function(){var t=this._layout&&this._layout.getShape();return t?t:null},isEmpty:function(){return this._emptiness},_updateEmptiness:function(){this._emptiness=this._calculateEmptiness();var t=this._callbacks.onEmptinessChange;t&&t.callback.call(t.context)},_calculateEmptiness:function(){return!this._layout||"function"==typeof this._layout.isEmpty&&this._layout.isEmpty()}}),t(_)});}],
[':H', function (ym) {
ym.modules.define("overlay.view.component.layoutLoader",["layout.storage","canvasLayout.storage","util.cancelableCallback"],function(a,e,n,t){var o={domLayout:e,canvasLayout:n};a({get:function(a){var e=o[a.name],n=a.layout;return n&&"string"!=typeof n&&n[a.name]&&(n=n[a.name]),e.get(n,a.data)},load:function(a,e,n,c){var r=!0,u=t.create(function(a){r=!1,e.call(c,a)}),l=t.create(function(a){r=!1,n.call(c,a)}),i=o[a.name],y=a.layout;return y&&"string"!=typeof y&&y[a.name]&&(y=y[a.name]),i.require({keys:[y],data:a.data}).spread(u,l,this).done(),{isActive:function(){return r},cancel:function(){r=!1,u.cancel(),l.cancel()}}}})});}],
['!G', function (ym) {
ym.modules.define("overlay.view.Dom",["util.defineClass","overlay.view.BaseWithLayout","util.extend","util.dom.element","util.dom.style","system.browser"],function(t,e,n,i,s,o,a){function r(t,e){this._eventMapper=t.eventMapper,this._lastPosition=[],r.superclass.constructor.call(this,t,e)}var l=ym.supports,h=!!l.css.checkProperty("transform"),u=36e3;e(r,n,{bindOptions:function(t){r.superclass.bindOptions.call(this,t),t.add(["pixelPerfect"],this._resetPosition,this,{defaultValues:{pixelPerfect:!0}}),t.add(["rotation"],this._onRotation,this,{defaultValues:{rotation:0}})},getElement:function(){return this._element},createLayoutContainer:function(t){this._element=s.create(this._fixElementParams(t.element||{}))},applyZIndex:function(){o.css(this._element,{zIndex:this._fixZIndex(this.getZIndex())})},_fixZIndex:function(t){return a.oldIE&&"undefined"==typeof t?0:t},_fixElementParams:function(t){return t.css=i({position:"absolute",width:0,height:0,zIndex:this._fixZIndex(this.getZIndex())},t.css),"iOS"==a.osFamily&&(t.patch=i({transform:{use3D:!0}},t.patch)),t},setupPane:function(){r.superclass.setupPane.call(this),this.getPane().getElement().appendChild(this._element)},clearPane:function(){r.superclass.clearPane.call(this),s.remove(this._element)},getLayoutName:function(){return"domLayout"},createLayout:function(t){var e=new t(this.getLayoutData(),this.getLayoutParameters());return e.setParentElement(this._element),this._eventMapper&&e.events.setParent(this._eventMapper),e},destroyLayout:function(t){this._eventMapper&&t.events.setParent(null),t.setParentElement(null),t.destroy()},_resetPosition:function(){return o.setPosition(this._element,[0,0]),o.patch(this._elements,{patch:{transform:{offset:[0,0]}}}),this.applyPosition()},_onRotation:function(){!this.monitor.get("pixelPerfect")&&h&&this.applyPosition()},applyPosition:function(){var t=this.getPane().toClientPixels(this.getPosition());if(this._lastPosition[0]!=t[0]||this._lastPosition[1]!=t[1])if(this._lastPosition=t,this.monitor.get("pixelPerfect")||!h)o.setPosition(this._element,t);else{var e=this.monitor.get("rotation");o.patch(this._element,{transform:{offset:t,rotate:e?Math.round(e*u)/u+"deg":e}})}}}),t(r)});}],
['!H', function (ym) {
ym.modules.define("overlay.view.Graphics",["util.defineClass","overlay.view.BaseWithLayout","util.bind","util.extend","util.dom.element","util.dom.style","system.browser","graphics.shape.Layout","overlay.component.globalOrderCounter","graphics.renderManager","geometry.pixel.Rectangle","graphics.render.canvas.shape.Layout"],function(t,e,a,i,n,s,o,r,h,p,u,c){function l(t,e){this._globalCounter=p(),this._renderLayoutCallback=i(this._renderLayout,this),l.superclass.constructor.call(this,t,e)}e(l,a,{bindOptions:function(t){l.superclass.bindOptions.call(this,t),t.add(["opacity","separateContainer","pixelPerfect","rotation"],this._updateRenderOptions,this,{opacity:!1,separateContainer:!1,pixelPerfect:!0,rotation:0})},createLayoutContainer:function(){this._graphicsShape=new h(this._calculateShapeGeometry()),this._graphicsShape.setRenderOptions(this._getRenderOptions())},applyZIndex:function(){this._updateRenderOptions()},_updateRenderOptions:function(){this._graphicsShape.setRenderOptions(this._getRenderOptions())},_getRenderOptions:function(){var t=this.getLayoutSync();return{opacity:this.monitor.get("opacity"),zIndex:this.getZIndex(),zOrder:this._globalCounter,rotation:this.monitor.get("rotation")||0,offset:t&&t.getOffset&&t.getOffset()||[0,0],isDynamic:this.monitor.get("separateContainer"),renderLayout:this._renderLayoutCallback,pixelPerfect:this.monitor.get("pixelPerfect")}},_renderLayout:function(t){var e=this.getLayoutSync();e&&e.renderLayout(t)},getLayoutName:function(){return"canvasLayout"},setupPane:function(){l.superclass.setupPane.call(this),this._graphicsShape.setContainerPane(u.getContainer(this.getPane(),this.getPane().getMap()))},clearPane:function(){l.superclass.clearPane.call(this),this._graphicsShape.removeFromContainer()},createLayout:function(t){var e=new t(this.getLayoutData(),this.getLayoutParameters());return e.build(),e.events.add("update",this._onLayoutUpdate,this),e},destroyLayout:function(t){t.events.remove("update",this._onLayoutUpdate,this),t.destroy()},_onLayoutUpdate:function(){this._graphicsShape&&this._graphicsShape.update()},applyPosition:function(){this._graphicsShape.setGeometry(this._calculateShapeGeometry())},_calculateShapeGeometry:function(){var t=this.getLayoutSync(),e=t&&t.getSize()||[0,0],a=t&&t.getOffset&&t.getOffset()||[0,0],i=this.getPosition(),n=[[0,0],e],s=[i[0]+a[0],i[1]+a[1]],o=[[n[0][0]+s[0],n[0][1]+s[1]],[n[1][0]+s[0],n[1][1]+s[1]]];return new c(o)}}),t(l)});}],
['!K', function (ym) {
ym.modules.define("overlay.view.Hotspot",["util.defineClass","overlay.view.Base","Hotspot","hotspot.Manager","util.array"],function(t,e,s,n,o,i){function a(t){this._shape=t.shape,this._eventMapper=t.eventMapper,this._containerPane=t.containerPane,this._pane=t.pane,this._monitorInteractiveOption=t.monitorInteractiveOption,a.superclass.constructor.call(this,t),this._hotspot=null,this._hotspotManager=null,this._cursorHandler=null,this._containerZIndex=0,this._addToPane()}function r(t){var e=3;if(i.isArray(t)){for(var s=0,n=t.length;s<n;++s)e=Math.max(e,+t[s]);t=e}return Math.max(3,+t)}e(a,s,{bindOptions:function(){this.monitor.add("strokeWidth",this._onStrokeWidthChange,this,{resolveCallback:this._resolveStrokeWidth}).add("cursor",this._onCursorChange,this,{defaultValue:"inherit"}),this._monitorInteractiveOption&&this.monitor.add("interactive",this._onInteractiveChange,this,{defaultValue:!0})},setPane:function(t){this._removeFromPane(),this._pane=t,this._addToPane()},setShape:function(t){this._shape=t,this._updateHotspot()},setContainerPane:function(t){this._containerPane&&this._clearContainerPaneListeners(),this._containerPane=t,this._containerPane&&this._setupContainerPaneListeners(),this._updateHotspotManager()},applyZIndex:function(){this._hotspot&&this._hotspot.setZIndex(this.getZIndex())},destroy:function(){this._removeFromPane(),a.superclass.destroy.call(this)},_onInteractiveChange:function(){this._updateHotspot()},_updateHotspot:function(){this._isValidShape()&&this._isInteractive()?this._hotspot?this._hotspot.setShape(this._createHotspotShape()):this._setupHotspot():this._hotspot&&this._clearHotspot()},_addToPane:function(){this._setupHotspotManager(),this._isValidShape()&&this._isInteractive()&&this._setupHotspot(),this._containerPane&&this._setupContainerPaneListeners()},_removeFromPane:function(){this._containerPane&&this._clearContainerPaneListeners(),this._hotspot&&this._clearHotspot(),this._clearHotspotManager()},_setupHotspotManager:function(){this._hotspotManager=o.get(this._pane),this._containerZIndex=(this._containerPane||this._pane).getZIndex()},_clearHotspotManager:function(){this._hotspotManager=null},_setupContainerPaneListeners:function(){this._containerPane.events.add("zindexchange",this._onContainerPaneZIndexChange,this)},_clearContainerPaneListeners:function(){this._containerPane.events.remove("zindexchange",this._onContainerPaneZIndexChange,this)},_onContainerPaneZIndexChange:function(){this._updateHotspotManager()},_createHotspotShape:function(){return this._shape.clone({strokeWidth:this.monitor.get("strokeWidth")})},_setupHotspot:function(){this._hotspot=new n(this._createHotspotShape(),this.getZIndex()),this._hotspot.events.setParent(this._eventMapper),this._hotspotManager.addHotspots([this._hotspot],this._containerZIndex),this._setupCursorListeners()},_clearHotspot:function(){this._cursorHandler&&this._clearCursor(),this._clearCursorListeners(),this._hotspotManager.removeHotspots([this._hotspot],this._containerZIndex),this._hotspot.events.setParent(null),this._hotspot=null},_isValidShape:function(){return this._shape&&this._shape.getGeometry()&&this._shape.getGeometry().getCoordinates().length},_isInteractive:function(){return this._hotspotManager&&(!this._monitorInteractiveOption||this._monitorInteractiveOption&&this.monitor.get("interactive"))},_resolveStrokeWidth:function(t,e){return r(e.get(t,0))},_onStrokeWidthChange:function(){this._hotspot&&this._hotspot.setShape(this._createHotspotShape())},_updateHotspotManager:function(){this._hotspot&&this._hotspotManager.removeHotspots([this._hotspot],this._containerZIndex),this._clearHotspotManager(),this._setupHotspotManager(),this._hotspot&&this._hotspotManager.addHotspots([this._hotspot],this._containerZIndex)},_setupCursorListeners:function(){this._hotspot.events.add("mouseenter",this._onMouseEnter,this).add("mouseleave",this._onMouseLeave,this),this._pane.getMap().events.add("mouseenter",this._onMouseLeave,this)},_clearCursorListeners:function(){this._hotspot.events.remove("mouseenter",this._onMouseEnter,this).remove("mouseleave",this._onMouseLeave,this),this._pane.getMap().events.remove("mouseenter",this._onMouseLeave,this)},_onMouseEnter:function(){this._cursorHandler||this._setupCursor()},_onMouseLeave:function(){this._cursorHandler&&this._clearCursor()},_setupCursor:function(){var t=this.monitor.get("cursor");null!==t&&(this._cursorHandler=this._pane.cursors.push(t))},_clearCursor:function(){this._cursorHandler.remove(),this._cursorHandler=null},_onCursorChange:function(){this._cursorHandler&&(this._clearCursor(),this._setupCursor())}}),t(a)});}]
]
);